[
  {
    "id": 33599625,
    "slug": "uq5wyk",
    "title": "语雀与Hexo互通且备份至Github",
    "book_id": 654573,
    "book": {
      "id": 654573,
      "type": "Column",
      "slug": "blog",
      "name": "Kmore Blog",
      "user_id": 682563,
      "description": "backup for blogs",
      "creator_id": 682563,
      "public": 1,
      "items_count": 3,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-03-25T16:03:08.160Z",
      "updated_at": "2021-03-25T16:03:08.000Z",
      "created_at": "2019-12-25T05:29:40.000Z",
      "namespace": "kmore/blog",
      "user": {
        "id": 682563,
        "type": "User",
        "login": "kmore",
        "name": "KentX",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 6,
        "public_books_count": 2,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2019-12-18T03:29:15.000Z",
        "updated_at": "2021-03-25T15:17:52.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 682563,
    "creator": {
      "id": 682563,
      "type": "User",
      "login": "kmore",
      "name": "KentX",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 6,
      "public_books_count": 2,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2019-12-18T03:29:15.000Z",
      "updated_at": "2021-03-25T15:17:52.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "tags: [Hexo, Travis]<br />categories: [金融狗在假装码农]\n\n---\n\n接着上一篇[《Travis部署Hexo记录》](https://blog.kmore.ml/2021/pt=03211800/)继续写。。。<br />\n<br /><!-- more --> <br />之前写到，异地写作只要写完之后git push一下，就会有Travis自动部署到github pages中。现在再来进一步进阶一下，在语雀写，并且自动部署，实现语雀与Hexo的互通。\n<a name=\"4Vye7\"></a>\n### 前置条件\n准备好语雀账号和腾讯云账号（阿里云也可以，但我用的是腾讯云，腾讯云提供的免费数量足够正常使用了，不用担心付费问题）<br />\n\n<a name=\"6KYxa\"></a>\n### 腾讯云--云函数\n如果在启用`云函数`中提示你开通什么的话，都选开通就可以。\n<a name=\"8b71243d\"></a>\n#### 新建云函数\n点开后选择自定义创建。地域我选的`广州`，据说只有广州和北京的能用，这个可以自己试试吧。运行环境选`php7`，函数名随意啦。<br />![新建云函数](https://z3.ax1x.com/2021/03/25/6XfT2j.png)\n<a name=\"vvxC7\"></a>\n#### 建立函数\n把下面这段代码复制到代码框里。\n```\n<?php\nfunction main_handler($event, $context) {\n    // 解析语雀post的数据\n    $update_title = '';\n    if($event->body){\n        $yuque_data= json_decode($event->body);\n        $update_title .= $yuque_data->data->title;\n    }\n    // 获取travis-ci的仓库信息\n    // curl -X GET https://api.travis-ci.com/owner/ShimingLuo/repos -H 'Authorization: token XXXXXXXXXX' -H 'Travis-API-Version: 3'\n    // 使用 repository.id、repository.slug\n    // default params\n    $repos = 'xxxxxx';  // 你的Travis仓库id 或 slug\n    $token = 'xxxxxx'; // 你的登录Travis token\n    $message = date(\"Y/m/d\").':yuque update:'.$update_title;\n    $branch = 'blog-source'; //需要读取的branch\n    // post params\n    $queryString = $event->queryString;\n    $q_token = $queryString->token ? $queryString->token : $token;\n    $q_repos = $queryString->repos ? $queryString->repos : $repos;\n    $q_message = $queryString->message ? $queryString->message : $message;\n    $q_branch = $queryString->branch ? $queryString->branch : 'blog-source'; //需要读取的branch\n    //request travis ci\n    $res_info = triggerTravisCI($q_repos, $q_token, $q_message, $q_branch);\n\n    $res_code = 0;\n    $res_message = '未知';\n    if($res_info['http_code']){\n        $res_code = $res_info['http_code'];\n        switch($res_info['http_code']){\n            case 200:\n            case 202:\n                $res_message = 'success';\n            break;\n            default:\n                $res_message = 'faild';\n            break;\n        }\n    }\n    $res = array(\n        'status'=>$res_code,\n        'message'=>$res_message\n    );\n    return $res;\n}\n\n/*\n* @description  travis api , trigger a build\n* @param $repos string 仓库ID、slug\n* @param $token string 登录验证token\n* @param $message string 触发信息\n* @param $branch string 分支\n* @return $info array 回包信息\n*/\nfunction triggerTravisCI ($repos, $token, $message='yuque update', $branch='blog-source') {\n    //初始化\n    $curl = curl_init();\n    //设置抓取的url\n    curl_setopt($curl, CURLOPT_URL, 'https://api.travis-ci.com/repo/'.$repos.'/requests');\n    //设置获取的信息以文件流的形式返回，而不是直接输出。\n    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n    //设置post方式提交\n    curl_setopt($curl, CURLOPT_CUSTOMREQUEST, \"POST\");\n    //设置post数据\n    $post_data = json_encode(array(\n        \"request\"=> array(\n            \"message\"=>$message,\n            \"branch\"=>$branch\n        )\n    ));\n    $header = array(\n      'Content-Type: application/json',\n      'Travis-API-Version: 3',\n      'Authorization:token '.$token,\n      'Content-Length:' . strlen($post_data)\n    );\n    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);\n    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);\n    //执行命令\n    $data = curl_exec($curl);\n    $info = curl_getinfo($curl);\n    //关闭URL请求\n    curl_close($curl);\n    return $info;\n}\n?>\n```\n<a name=\"kr9nu\"></a>\n##### 特别注意：\n\n- 在Travis中获取token以后，Linux中运行\n```\ncurl -X GET https://api.travis-ci.com/owner/ShimingLuo/repos -H 'Authorization: token XXXXXXXXXX' -H 'Travis-API-Version: 3'\n```\n会返回一个json格式的内容，找到你要运行的repo。理论上，repo id和slug都行，但我只有id成功了，我建议就用id吧。\n\n- 在上面命令的**第16、22、55行**的branch要改成需要操作的branch。例如我的gh page在master branch，但我的源码是在`blog-source`里，这里我都改成了`blog-source`。\n\n\n\n<a name=\"MB19j\"></a>\n####  触发管理\n```\nAPI服务名：SCF_API_SERVICE\nserviceId：service-5i0acgmi\napiId：api-kysretyg\n请求方法：ANY\n发布环境：发布\n鉴权方式：免鉴权\n启用集成响应：已启用\n启用Base64编码：未启用\n支持CORS：否\n后端超时：15s\n访问路径：https://service-5i0acgmi-1256168505.gz.apigw.tencentcs.com/release/xxxxxxx\n```\n![触发管理](https://z3.ax1x.com/2021/03/25/6Xf7xs.png)<br />复制最后一行的访问路径，备用。<br />至此，腾讯云这边就解决了。<br />\n\n<a name=\"VCIT1\"></a>\n### 语雀端\n<a name=\"qQak6\"></a>\n#### 新建知识库\n新建一个知识库，类型就选博客吧，这样比较简单，可见范围随意，互联网可见也没啥问题，反正都是写了给大家看的。\n<a name=\"8cOR2\"></a>\n#### 查看/变更知识库访问路径\n这步比较重要。在新的知识库里，选择设置，能够看到路径的框，开头应该是`yuque.com`，后面跟着第一个，是你的login（这个可以在帐户中设置），第二个是可以编辑状态的，是你的repo名，记录一下，后面会用到\n<a name=\"zvksX\"></a>\n#### 获取token\n进入到语雀的账号设置中，有一个token的标签，名字随意，至少勾选`读取你的知识库`和`读取你的文档`，然后把一长串token保存备份，也要用到。<br />![获取token](https://z3.ax1x.com/2021/03/25/6XhpRJ.png)\n<a name=\"Kyx5o\"></a>\n#### 配置webhook\n进到刚才新建的博客repo中，点设置---开发者。<br />我们来添加一个Web Hook：<br />\n\n- 把前面在腾讯云里复制出来的访问路径地址，复制到URL栏里\n- 在下面勾选中，我是勾选了**发布文档、更新文档、删除文档。**\n\n![新建WebHook](https://z3.ax1x.com/2021/03/25/6Xh9z9.png)<br />添加保存即可！<br />\n\n<a name=\"cFY4t\"></a>\n### Hexo配置\n<a name=\"7kFhU\"></a>\n#### 增加dependency\n要使用语雀到hexo，我们需要加2个package。<br />分别是`[yuque-hexo] `和`[cross-env](https://github.com/kentcdodds/cross-env)` <br />前者是为了读取语雀的文档，后者是为了在Travis中可以读取放在环境变量里的语雀TOKEN<br />方法是在hexo根目录的`package.json`中的dependencies最后加入两行<br />可以参考我的`[package.json](https://raw.githubusercontent.com/kentsx/blog/blog-source/package.json)`\n```\n\"cross-env\": \"^7.0.3\",\n\"yuque-hexo\": \"^1.7.0\"\n```\n<a name=\"yXLqy\"></a>\n#### 配置yuque-hexo\n还是在`package.json`中，在最前面加上如下内容：\n```\n  \n{\n  \"name\": \"hexo-site\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"clean\": \"hexo clean\",\n    \"clean:yuque\": \"yuque-hexo clean\",\n    \"deploy\": \"npm run sync && hexo clean && hexo g\"\n  },\n  \"hexo\": {\n    \"version\": \"5.3.0\"\n  },\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts/yuque\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"title\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"xxxx\",\n    \"repo\": \"xxxx\",\n    \"onlyPublished\": false\n  },\n```\n 第21行和22行的内容，替换为前面在语雀里获取的。\n<a name=\"JrQpi\"></a>\n#### 配置.travis.yml文件\n上一篇，我们已经建立了这个文件，但只能完成本地到travis的自动部署，现在我们对这个来进行适当调整。以下就是我纠结了时间最长的部分了，经历了无法获取语雀文档内容、无法备份到github等等。<br />废话不说，先上代码：\n```\nlanguage: node_js\nnode_js: stable\n\n\n\nbranches:\n  only:\n  - blog-source\n\n# S: Build Lifecycle\nbefore_instal:\n- export TZ='Asia/Shanghai' # 更改时区\n\ninstall:\n  - npm install\n\n# 缓存文件\ncache:\n  directories:\n    - node_modules\n\nscript:\n  # - npm run deploy\n  - yuque-hexo clean\n  - cross-env YUQUE_TOKEN=$YUQUE_TOKEN yuque-hexo sync\n  #备份到blog-source branch\n  - git init\n  - git config user.name \"XXXXX\"\n  - git config user.email \"xxxx@xxxx\" \n  - git checkout blog-source\n  - git add .\n  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n  # - git status\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" blog-source:blog-source\n  - hexo g\n\nafter_script:\n#生成新的page到master\n  - cd ./public\n  - git init\n  - git config user.name \"XXXXX\" \n  - git config user.email \"xxxx@xxxx\" \n  - git add .\n  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" master:master\n# E: Build LifeCycle\n\n# branches:\n#   only:\n#     - blog-source\nenv:\n global:\n   - GH_REF: github.com/kentsx/blog.git\n```\n主要改动就是在`script`一节里，我加入了语雀的部分和备份到github的部分。变动如下：\n```\n  - yuque-hexo clean # 每次拉取语雀文档前，先把原来的清空\n  - cross-env YUQUE_TOKEN=$YUQUE_TOKEN yuque-hexo sync \n  # 后面需要在Travis中配置YUQUE_TOKEN变量，这里调用了cross-env\n  \n  #备份到blog-source branch\n  - git init\n  - git config user.name \"XXXXX\" #github登录名\n  - git config user.email \"xxxx@xxxx\" # github邮箱\n  - git checkout blog-source  ##这步很关键，不然会出现detached HEAD情况，branch选择自己hexo源码branch\n  - git add .\n  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n  # 这样写，就能知道是那次travis部署push过来的了。\n  # - git status\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" blog-source:blog-source\n```\n<a name=\"tCPQW\"></a>\n### Travis端\n在之前的基础上，添加一个环境变量，名称为`YUQUE_TOKEN`，value就是刚才语雀端里那串token<br />\n<br />\n\n<a name=\"ielDc\"></a>\n### 参考文档\n\n- [《Hexo 博客终极玩法：云端写作，自动部署》](https://segmentfault.com/a/1190000017797561)\n",
    "body_draft": "tags: [Hexo, Travis]<br />categories: [金融狗在假装码农]\n\n---\n\n接着上一篇[《Travis部署Hexo记录》](https://blog.kmore.ml/2021/pt=03211800/)继续写。。。<br />\n<br /><!-- more --> <br />之前写到，异地写作只要写完之后git push一下，就会有Travis自动部署到github pages中。现在再来进一步进阶一下，在语雀写，并且自动部署，实现语雀与Hexo的互通。\n<a name=\"4Vye7\"></a>\n### 前置条件\n准备好语雀账号和腾讯云账号（阿里云也可以，但我用的是腾讯云，腾讯云提供的免费数量足够正常使用了，不用担心付费问题）<br />\n\n<a name=\"6KYxa\"></a>\n### 腾讯云--云函数\n如果在启用`云函数`中提示你开通什么的话，都选开通就可以。\n<a name=\"8b71243d\"></a>\n#### 新建云函数\n点开后选择自定义创建。地域我选的`广州`，据说只有广州和北京的能用，这个可以自己试试吧。运行环境选`php7`，函数名随意啦。<br />![新建云函数](https://z3.ax1x.com/2021/03/25/6XfT2j.png)\n<a name=\"vvxC7\"></a>\n#### 建立函数\n把下面这段代码复制到代码框里。\n```\n<?php\nfunction main_handler($event, $context) {\n    // 解析语雀post的数据\n    $update_title = '';\n    if($event->body){\n        $yuque_data= json_decode($event->body);\n        $update_title .= $yuque_data->data->title;\n    }\n    // 获取travis-ci的仓库信息\n    // curl -X GET https://api.travis-ci.com/owner/ShimingLuo/repos -H 'Authorization: token XXXXXXXXXX' -H 'Travis-API-Version: 3'\n    // 使用 repository.id、repository.slug\n    // default params\n    $repos = 'xxxxxx';  // 你的Travis仓库id 或 slug\n    $token = 'xxxxxx'; // 你的登录Travis token\n    $message = date(\"Y/m/d\").':yuque update:'.$update_title;\n    $branch = 'blog-source'; //需要读取的branch\n    // post params\n    $queryString = $event->queryString;\n    $q_token = $queryString->token ? $queryString->token : $token;\n    $q_repos = $queryString->repos ? $queryString->repos : $repos;\n    $q_message = $queryString->message ? $queryString->message : $message;\n    $q_branch = $queryString->branch ? $queryString->branch : 'blog-source'; //需要读取的branch\n    //request travis ci\n    $res_info = triggerTravisCI($q_repos, $q_token, $q_message, $q_branch);\n\n    $res_code = 0;\n    $res_message = '未知';\n    if($res_info['http_code']){\n        $res_code = $res_info['http_code'];\n        switch($res_info['http_code']){\n            case 200:\n            case 202:\n                $res_message = 'success';\n            break;\n            default:\n                $res_message = 'faild';\n            break;\n        }\n    }\n    $res = array(\n        'status'=>$res_code,\n        'message'=>$res_message\n    );\n    return $res;\n}\n\n/*\n* @description  travis api , trigger a build\n* @param $repos string 仓库ID、slug\n* @param $token string 登录验证token\n* @param $message string 触发信息\n* @param $branch string 分支\n* @return $info array 回包信息\n*/\nfunction triggerTravisCI ($repos, $token, $message='yuque update', $branch='blog-source') {\n    //初始化\n    $curl = curl_init();\n    //设置抓取的url\n    curl_setopt($curl, CURLOPT_URL, 'https://api.travis-ci.com/repo/'.$repos.'/requests');\n    //设置获取的信息以文件流的形式返回，而不是直接输出。\n    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n    //设置post方式提交\n    curl_setopt($curl, CURLOPT_CUSTOMREQUEST, \"POST\");\n    //设置post数据\n    $post_data = json_encode(array(\n        \"request\"=> array(\n            \"message\"=>$message,\n            \"branch\"=>$branch\n        )\n    ));\n    $header = array(\n      'Content-Type: application/json',\n      'Travis-API-Version: 3',\n      'Authorization:token '.$token,\n      'Content-Length:' . strlen($post_data)\n    );\n    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);\n    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);\n    //执行命令\n    $data = curl_exec($curl);\n    $info = curl_getinfo($curl);\n    //关闭URL请求\n    curl_close($curl);\n    return $info;\n}\n?>\n```\n<a name=\"kr9nu\"></a>\n##### 特别注意：\n\n- 在Travis中获取token以后，Linux中运行\n```\ncurl -X GET https://api.travis-ci.com/owner/ShimingLuo/repos -H 'Authorization: token XXXXXXXXXX' -H 'Travis-API-Version: 3'\n```\n会返回一个json格式的内容，找到你要运行的repo。理论上，repo id和slug都行，但我只有id成功了，我建议就用id吧。\n\n- 在上面命令的**第16、22、55行**的branch要改成需要操作的branch。例如我的gh page在master branch，但我的源码是在`blog-source`里，这里我都改成了`blog-source`。\n\n\n\n<a name=\"MB19j\"></a>\n####  触发管理\n```\nAPI服务名：SCF_API_SERVICE\nserviceId：service-5i0acgmi\napiId：api-kysretyg\n请求方法：ANY\n发布环境：发布\n鉴权方式：免鉴权\n启用集成响应：已启用\n启用Base64编码：未启用\n支持CORS：否\n后端超时：15s\n访问路径：https://service-5i0acgmi-1256168505.gz.apigw.tencentcs.com/release/xxxxxxx\n```\n![触发管理](https://z3.ax1x.com/2021/03/25/6Xf7xs.png)<br />复制最后一行的访问路径，备用。<br />至此，腾讯云这边就解决了。<br />\n\n<a name=\"VCIT1\"></a>\n### 语雀端\n<a name=\"qQak6\"></a>\n#### 新建知识库\n新建一个知识库，类型就选博客吧，这样比较简单，可见范围随意，互联网可见也没啥问题，反正都是写了给大家看的。\n<a name=\"8cOR2\"></a>\n#### 查看/变更知识库访问路径\n这步比较重要。在新的知识库里，选择设置，能够看到路径的框，开头应该是`yuque.com`，后面跟着第一个，是你的login（这个可以在帐户中设置），第二个是可以编辑状态的，是你的repo名，记录一下，后面会用到\n<a name=\"zvksX\"></a>\n#### 获取token\n进入到语雀的账号设置中，有一个token的标签，名字随意，至少勾选`读取你的知识库`和`读取你的文档`，然后把一长串token保存备份，也要用到。<br />![获取token](https://z3.ax1x.com/2021/03/25/6XhpRJ.png)\n<a name=\"Kyx5o\"></a>\n#### 配置webhook\n进到刚才新建的博客repo中，点设置---开发者。<br />我们来添加一个Web Hook：<br />\n\n- 把前面在腾讯云里复制出来的访问路径地址，复制到URL栏里\n- 在下面勾选中，我是勾选了**发布文档、更新文档、删除文档。**\n\n![新建WebHook](https://z3.ax1x.com/2021/03/25/6Xh9z9.png)<br />添加保存即可！<br />\n\n<a name=\"cFY4t\"></a>\n### Hexo配置\n<a name=\"7kFhU\"></a>\n#### 增加dependency\n要使用语雀到hexo，我们需要加2个package。<br />分别是`[yuque-hexo] `和`[cross-env](https://github.com/kentcdodds/cross-env)` <br />前者是为了读取语雀的文档，后者是为了在Travis中可以读取放在环境变量里的语雀TOKEN<br />方法是在hexo根目录的`package.json`中的dependencies最后加入两行<br />可以参考我的`[package.json](https://raw.githubusercontent.com/kentsx/blog/blog-source/package.json)`\n```\n\"cross-env\": \"^7.0.3\",\n\"yuque-hexo\": \"^1.7.0\"\n```\n<a name=\"yXLqy\"></a>\n#### 配置yuque-hexo\n还是在`package.json`中，在最前面加上如下内容：\n```\n  \n{\n  \"name\": \"hexo-site\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"clean\": \"hexo clean\",\n    \"clean:yuque\": \"yuque-hexo clean\",\n    \"deploy\": \"npm run sync && hexo clean && hexo g\"\n  },\n  \"hexo\": {\n    \"version\": \"5.3.0\"\n  },\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts/yuque\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"title\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"xxxx\",\n    \"repo\": \"xxxx\",\n    \"onlyPublished\": false\n  },\n```\n 第21行和22行的内容，替换为前面在语雀里获取的。\n<a name=\"JrQpi\"></a>\n#### 配置.travis.yml文件\n上一篇，我们已经建立了这个文件，但只能完成本地到travis的自动部署，现在我们对这个来进行适当调整。以下就是我纠结了时间最长的部分了，经历了无法获取语雀文档内容、无法备份到github等等。<br />废话不说，先上代码：\n```\nlanguage: node_js\nnode_js: stable\n\n\n\nbranches:\n  only:\n  - blog-source\n\n# S: Build Lifecycle\nbefore_instal:\n- export TZ='Asia/Shanghai' # 更改时区\n\ninstall:\n  - npm install\n\n# 缓存文件\ncache:\n  directories:\n    - node_modules\n\nscript:\n  # - npm run deploy\n  - yuque-hexo clean\n  - cross-env YUQUE_TOKEN=$YUQUE_TOKEN yuque-hexo sync\n  #备份到blog-source branch\n  - git init\n  - git config user.name \"XXXXX\"\n  - git config user.email \"xxxx@xxxx\" \n  - git checkout blog-source\n  - git add .\n  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n  # - git status\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" blog-source:blog-source\n  - hexo g\n\nafter_script:\n#生成新的page到master\n  - cd ./public\n  - git init\n  - git config user.name \"XXXXX\" \n  - git config user.email \"xxxx@xxxx\" \n  - git add .\n  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" master:master\n# E: Build LifeCycle\n\n# branches:\n#   only:\n#     - blog-source\nenv:\n global:\n   - GH_REF: github.com/kentsx/blog.git\n```\n主要改动就是在`script`一节里，我加入了语雀的部分和备份到github的部分。变动如下：\n```\n  - yuque-hexo clean # 每次拉取语雀文档前，先把原来的清空\n  - cross-env YUQUE_TOKEN=$YUQUE_TOKEN yuque-hexo sync \n  # 后面需要在Travis中配置YUQUE_TOKEN变量，这里调用了cross-env\n  \n  #备份到blog-source branch\n  - git init\n  - git config user.name \"XXXXX\" #github登录名\n  - git config user.email \"xxxx@xxxx\" # github邮箱\n  - git checkout blog-source  ##这步很关键，不然会出现detached HEAD情况，branch选择自己hexo源码branch\n  - git add .\n  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n  # 这样写，就能知道是那次travis部署push过来的了。\n  # - git status\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" blog-source:blog-source\n```\n<a name=\"tCPQW\"></a>\n### Travis端\n在之前的基础上，添加一个环境变量，名称为`YUQUE_TOKEN`，value就是刚才语雀端里那串token<br />\n<br />\n\n<a name=\"ielDc\"></a>\n### 参考文档\n\n- [《Hexo 博客终极玩法：云端写作，自动部署》](https://segmentfault.com/a/1190000017797561)\n",
    "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B61%2C0%2C1%2C0%5D%2C%5B61%2C0%2C1%2C2%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">tags: [Hexo, Travis]</p><p data-lake-id=\"1d39a65991d63485922f3dc0d5ffa49b\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">categories: [金融狗在假装码农]</p><div data-card-type=\"block\" data-lake-card=\"hr\"><hr style=\"background-color: rgb(232, 232, 232); border: 1px solid transparent; margin: 18px 0px;\"></div><p data-lake-id=\"a40f5b7d5057885e7bfc24d13f00464f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">接着上一篇[《Travis部署Hexo记录》](https://blog.kmore.ml/2021/pt=03211800/)继续写。。。</p><p data-lake-id=\"8e7bbd4d78cecc62e1e032811d1aa408\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"cd6af15550d4580dd7bbcfa50adea8e7\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">&lt;!-- more --&gt;&nbsp;</p><p data-lake-id=\"1c928ab5346cb642d1b7adb4358b650e\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">之前写到，异地写作只要写完之后git push一下，就会有Travis自动部署到github pages中。现在再来进一步进阶一下，在语雀写，并且自动部署，实现语雀与Hexo的互通。</p><h3 data-lake-id=\"2daf66a23318e5c76fe1425337a19787\" id=\"4Vye7\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">前置条件</h3><p data-lake-id=\"93d41590f9ed4bff7225dcd1e39490ff\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">准备好语雀账号和腾讯云账号（阿里云也可以，但我用的是腾讯云，腾讯云提供的免费数量足够正常使用了，不用担心付费问题）</p><p data-lake-id=\"415caf7ebfa350d8ec0ab987ca5a6980\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"722590afff7a476f2d8c2bb180b19637\" id=\"6KYxa\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">腾讯云--云函数</h3><p data-lake-id=\"53c44089627d69805b5fab4cf4938906\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">如果在启用`云函数`中提示你开通什么的话，都选开通就可以。</p><h4 data-lake-id=\"042e53df4b0563b4aa8c2e0937fb1c33\" id=\"8b71243d\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">新建云函数</h4><p data-lake-id=\"36cba54f7236f0bb0c507b426628b634\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">点开后选择自定义创建。地域我选的`广州`，据说只有广州和北京的能用，这个可以自己试试吧。运行环境选`php7`，函数名随意啦。</p><p data-lake-id=\"8cba53c3c14dd5f50546d22fe1e1b8db\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">![新建云函数](https://z3.ax1x.com/2021/03/25/6XfT2j.png)</p><h4 data-lake-id=\"9e4dae3d6110955e3fb038d37d18c232\" id=\"vvxC7\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">建立函数</h4><p data-lake-id=\"cc21b43e38c1e6b3e8131998d588f469\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">把下面这段代码复制到代码框里。</p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"Roqic\" class=\"lake-card-margin\" data-language=\"plain\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">&lt;?php\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">function main_handler($event, $context) {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    // 解析语雀post的数据\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $update_title = '';\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    if($event-&gt;body){\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        $yuque_data= json_decode($event-&gt;body);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        $update_title .= $yuque_data-&gt;data-&gt;title;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    }\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    // 获取travis-ci的仓库信息\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    // curl -X GET https://api.travis-ci.com/owner/ShimingLuo/repos -H 'Authorization: token XXXXXXXXXX' -H 'Travis-API-Version: 3'\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    // 使用 repository.id、repository.slug\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    // default params\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $repos = 'xxxxxx';  // 你的Travis仓库id 或 slug\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $token = 'xxxxxx'; // 你的登录Travis token\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $message = date(\"Y/m/d\").':yuque update:'.$update_title;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $branch = 'blog-source'; //需要读取的branch\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    // post params\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $queryString = $event-&gt;queryString;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $q_token = $queryString-&gt;token ? $queryString-&gt;token : $token;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $q_repos = $queryString-&gt;repos ? $queryString-&gt;repos : $repos;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $q_message = $queryString-&gt;message ? $queryString-&gt;message : $message;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $q_branch = $queryString-&gt;branch ? $queryString-&gt;branch : 'blog-source'; //需要读取的branch\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //request travis ci\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $res_info = triggerTravisCI($q_repos, $q_token, $q_message, $q_branch);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $res_code = 0;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $res_message = '未知';\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    if($res_info['http_code']){\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        $res_code = $res_info['http_code'];\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        switch($res_info['http_code']){\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            case 200:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            case 202:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">                $res_message = 'success';\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            break;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            default:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">                $res_message = 'faild';\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            break;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        }\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    }\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $res = array(\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        'status'=&gt;$res_code,\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        'message'=&gt;$res_message\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    );\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    return $res;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">}\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">/*\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">* @description  travis api , trigger a build\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">* @param $repos string 仓库ID、slug\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">* @param $token string 登录验证token\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">* @param $message string 触发信息\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">* @param $branch string 分支\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">* @return $info array 回包信息\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">*/\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">function triggerTravisCI ($repos, $token, $message='yuque update', $branch='blog-source') {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //初始化\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $curl = curl_init();\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //设置抓取的url\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    curl_setopt($curl, CURLOPT_URL, 'https://api.travis-ci.com/repo/'.$repos.'/requests');\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //设置获取的信息以文件流的形式返回，而不是直接输出。\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //设置post方式提交\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    curl_setopt($curl, CURLOPT_CUSTOMREQUEST, \"POST\");\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //设置post数据\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $post_data = json_encode(array(\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        \"request\"=&gt; array(\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            \"message\"=&gt;$message,\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            \"branch\"=&gt;$branch\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        )\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    ));\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $header = array(\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">      'Content-Type: application/json',\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">      'Travis-API-Version: 3',\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">      'Authorization:token '.$token,\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">      'Content-Length:' . strlen($post_data)\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    );\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //执行命令\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $data = curl_exec($curl);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    $info = curl_getinfo($curl);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    //关闭URL请求\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    curl_close($curl);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    return $info;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">}\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">?&gt;</span></span></pre></div></div></div><h5 data-lake-id=\"e816f1be351bc90e17bcf70e23010ba8\" id=\"kr9nu\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 14px; line-height: 24px;\">特别注意：</h5><ul data-lake-id=\"d571040066ff43fbd49ee64e078f98b4\" lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li data-lake-id=\"125ae8103127344c146766ad18eaae2c\">在Travis中获取token以后，Linux中运行</li></ul><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"o2mS1\" class=\"lake-card-margin\" data-language=\"plain\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">curl -X GET https://api.travis-ci.com/owner/ShimingLuo/repos -H 'Authorization: token XXXXXXXXXX' -H 'Travis-API-Version: 3'</span></span></pre></div></div></div><p data-lake-id=\"52ceccbe1fe62a2ed8454c4693e4368a\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">会返回一个json格式的内容，找到你要运行的repo。理论上，repo id和slug都行，但我只有id成功了，我建议就用id吧。</p><ul data-lake-id=\"6f477f4513d0dbef2224a81d17bdb445\" lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li data-lake-id=\"d3656ab03ae31b2b549b2e7f7144da69\">在上面命令的<strong>第16、22、55行</strong>的branch要改成需要操作的branch。例如我的gh page在master branch，但我的源码是在`blog-source`里，这里我都改成了<span>`blog-source`。</span></li></ul><p data-lake-id=\"a40b33ad570786e921788d6b37e7fb45\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 data-lake-id=\"f43201ca97dc23457c112ea71bd76127\" id=\"MB19j\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\"> 触发管理</h4><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"v47Wd\" class=\"lake-card-margin\" data-language=\"plain\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">API服务名：SCF_API_SERVICE\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">serviceId：service-5i0acgmi\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">apiId：api-kysretyg\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">请求方法：ANY\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">发布环境：发布\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">鉴权方式：免鉴权\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">启用集成响应：已启用\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">启用Base64编码：未启用\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">支持CORS：否\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">后端超时：15s\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">访问路径：https://service-5i0acgmi-1256168505.gz.apigw.tencentcs.com/release/xxxxxxx</span></span></pre></div></div></div><p data-lake-id=\"5a44d864ebb572fdbb3e027b030971c7\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">![触发管理](https://z3.ax1x.com/2021/03/25/6Xf7xs.png)</p><p data-lake-id=\"cb5c9b81edb87ed449adeaf92244c0c3\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">复制最后一行的访问路径，备用。</p><p data-lake-id=\"ca31993af20afd2c3ae75d086ab09046\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">至此，腾讯云这边就解决了。</p><p data-lake-id=\"106119e450d9bfd7bbaf40dee74290d9\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"72b78a1dbc72173da823d2ee7a47a159\" id=\"VCIT1\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">语雀端</h3><h4 data-lake-id=\"8c0b156f7b90b25f739ac487b355187d\" id=\"qQak6\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">新建知识库</h4><p data-lake-id=\"79f95d712bdf2d2fcd236619cec55ac6\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">新建一个知识库，类型就选博客吧，这样比较简单，可见范围随意，互联网可见也没啥问题，反正都是写了给大家看的。</p><h4 data-lake-id=\"13c6301c5c5f24fda0b5a0c418d4e73c\" id=\"8cOR2\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">查看/变更知识库访问路径</h4><p data-lake-id=\"0e169d7b6258bffefec47b05fe3ec208\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">这步比较重要。在新的知识库里，选择设置，能够看到路径的框，开头应该是`yuque.com`，后面跟着第一个，是你的login（这个可以在帐户中设置），第二个是可以编辑状态的，是你的repo名，记录一下，后面会用到</p><h4 data-lake-id=\"70484a28150cf4779bdff68c5f16d6d9\" id=\"zvksX\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">获取token</h4><p data-lake-id=\"4096ad941291a762c9f3ce46f9e01b73\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">进入到语雀的账号设置中，有一个token的标签，名字随意，至少勾选`读取你的知识库`和`读取你的文档`，然后把一长串token保存备份，也要用到。</p><p data-lake-id=\"73d07c687b40c5394334ca7eb3ab4b1d\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">![获取token](https://z3.ax1x.com/2021/03/25/6XhpRJ.png)</p><h4 data-lake-id=\"7413a264c3b398cc8bbb82454e82313c\" id=\"Kyx5o\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">配置webhook</h4><p data-lake-id=\"d15f7ae04f1ca2e99f8559b717b415a4\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">进到刚才新建的博客repo中，点设置---开发者。</p><p data-lake-id=\"746852047f5b22b0cfb2a8bd5a78089f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">我们来添加一个Web Hook：</p><p data-lake-id=\"72cef99e9d1dd0214bd452744bcf74c6\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><ul data-lake-id=\"bfa3165faa426921c4dd89a23fbf6ca8\" lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li data-lake-id=\"3c5da86547d3aff0634c1ab0f8650f0e\">把前面在腾讯云里复制出来的访问路径地址，复制到URL栏里</li><li data-lake-id=\"04580610bfdbe0cdcd80f1fe93c8ab76\">在下面勾选中，我是勾选了<strong><span>发布文档、</span></strong><strong><span>更新文档、</span></strong><strong><span>删除文档。</span></strong></li></ul><p data-lake-id=\"5b766f968b3538690456164c5ea1d8d0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">![新建WebHook](https://z3.ax1x.com/2021/03/25/6Xh9z9.png)</p><p data-lake-id=\"f8142b497af7c0bf35dbd3df1675eda9\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">添加保存即可！</p><p data-lake-id=\"9d55a20b2dbce2193cf2303811146313\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"0a113bd6fb4fb566780100efa9f97106\" id=\"cFY4t\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">Hexo配置</h3><h4 data-lake-id=\"add13be52da9e50cce6d2e414a7ce22b\" id=\"7kFhU\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">增加dependency</h4><p data-lake-id=\"62bd7c85b5c395d3cb72b3c885c0b8a8\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">要使用语雀到hexo，我们需要加2个package。</p><p data-lake-id=\"5f696905250d75e7b1c75609ddd82d88\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">分别是`[yuque-hexo] `和`[<span class=\"lake-fontsize-9\" style=\"color: rgb(3, 47, 98); font-size: 12px;\" data-mce-style=\"font-size: 9px\">cross-env](</span>https://github.com/kentcdodds/cross-env<span class=\"lake-fontsize-9\" style=\"color: rgb(3, 47, 98); font-size: 12px;\" data-mce-style=\"font-size: 9px\">)</span>` </p><p data-lake-id=\"1e916096f90cb52a3bd6ea64c4b20f93\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">前者是为了读取语雀的文档，后者是为了在Travis中可以读取放在环境变量里的语雀TOKEN</p><p data-lake-id=\"9303db18b03b3c89676d8ecadc0b31eb\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">方法是在hexo根目录的`package.json`中的dependencies最后加入两行</p><p data-lake-id=\"f174083e210e896d7b4cbea2d9c2507e\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">可以参考我的`[package.json](https://raw.githubusercontent.com/kentsx/blog/blog-source/package.json)`</p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"w2yts\" class=\"lake-card-margin\" data-language=\"plain\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"cross-env\": \"^7.0.3\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"yuque-hexo\": \"^1.7.0\"</span></span></pre></div></div></div><h4 data-lake-id=\"f11a0aa49bd78f82756a4612fcd569b5\" id=\"yXLqy\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">配置yuque-hexo</h4><p data-lake-id=\"316c746c6211e1cf33c72cbe29b3b23c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">还是在<span>`package.json`中，在最前面加上如下内容：</span></p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"GgGhO\" class=\"lake-card-margin\" data-language=\"plain\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">{\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \"name\": \"hexo-site\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \"version\": \"0.0.0\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \"private\": true,\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \"scripts\": {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"clean\": \"hexo clean\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"clean:yuque\": \"yuque-hexo clean\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"deploy\": \"npm run sync &amp;&amp; hexo clean &amp;&amp; hexo g\"\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  },\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \"hexo\": {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"version\": \"5.3.0\"\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  },\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \"yuqueConfig\": {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"postPath\": \"source/_posts/yuque\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"cachePath\": \"yuque.json\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"mdNameFormat\": \"title\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"adapter\": \"hexo\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"concurrency\": 5,\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"login\": \"xxxx\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"repo\": \"xxxx\",\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    \"onlyPublished\": false\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  },</span></span></pre></div></div></div><p data-lake-id=\"310da5b15f614eaadb5c6426861da417\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"> 第21行和22行的内容，替换为前面在语雀里获取的。</p><h4 data-lake-id=\"1de70a6d5c2471dda60c18e0f8af504f\" id=\"JrQpi\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">配置.travis.yml文件</h4><p data-lake-id=\"4e5f6396e2c21ba3c6d942de8a6b60af\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">上一篇，我们已经建立了这个文件，但只能完成本地到travis的自动部署，现在我们对这个来进行适当调整。以下就是我纠结了时间最长的部分了，经历了无法获取语雀文档内容、无法备份到github等等。</p><p data-lake-id=\"3b7e161cfcdb46ddee6658e7e4352a55\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">废话不说，先上代码：</p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"e28CF\" class=\"lake-card-margin\" data-language=\"plain\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">language: node_js\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">node_js: stable\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">branches:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  only:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - blog-source\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"># S: Build Lifecycle\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">before_instal:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">- export TZ='Asia/Shanghai' # 更改时区\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">install:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - npm install\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"># 缓存文件\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">cache:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  directories:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    - node_modules\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">script:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  # - npm run deploy\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - yuque-hexo clean\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - cross-env YUQUE_TOKEN=$YUQUE_TOKEN yuque-hexo sync\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  #备份到blog-source branch\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git init\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git config user.name \"XXXXX\"\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git config user.email \"xxxx@xxxx\" \n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git checkout blog-source\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git add .\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  # - git status\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" blog-source:blog-source\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - hexo g\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">after_script:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">#生成新的page到master\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - cd ./public\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git init\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git config user.name \"XXXXX\" \n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git config user.email \"xxxx@xxxx\" \n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git add .\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" master:master\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"># E: Build LifeCycle\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"># branches:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">#   only:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">#     - blog-source\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">env:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"> global:\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">   - GH_REF: github.com/kentsx/blog.git</span></span></pre></div></div></div><p data-lake-id=\"6e0723e0afc56167b8d8e2fef19871f9\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">主要改动就是在`script`一节里，我加入了语雀的部分和备份到github的部分。变动如下：</p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"uGAwN\" class=\"lake-card-margin\" data-language=\"plain\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - yuque-hexo clean # 每次拉取语雀文档前，先把原来的清空\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - cross-env YUQUE_TOKEN=$YUQUE_TOKEN yuque-hexo sync \n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  # 后面需要在Travis中配置YUQUE_TOKEN变量，这里调用了cross-env\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  \n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  #备份到blog-source branch\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git init\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git config user.name \"XXXXX\" #github登录名\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git config user.email \"xxxx@xxxx\" # github邮箱\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git checkout blog-source  ##这步很关键，不然会出现detached HEAD情况，branch选择自己hexo源码branch\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git add .\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git commit -m \" -#$TRAVIS_BUILD_NUMBER-TravisCI - `date +\"%Y-%m-%d %H:%M\"`\"\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  # 这样写，就能知道是那次travis部署push过来的了。\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  # - git status\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" blog-source:blog-source</span></span></pre></div></div></div><h3 data-lake-id=\"c45c47fe873d1e984cde066f57ae5189\" id=\"tCPQW\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">Travis端</h3><p data-lake-id=\"76fb41e29b412c7841acf8afc10b19fb\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">在之前的基础上，添加一个环境变量，名称为`YUQUE_TOKEN`，value就是刚才语雀端里那串token</p><p data-lake-id=\"d1a4c8deb1b00aea183c5ca5854df1f4\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"dba5b30ef12813677599cb8a6dae6c0c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"ed33d8c3df84261b341fc65cfe8d789d\" id=\"ielDc\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">参考文档</h3><ul data-lake-id=\"eedff1f8de0e184a0f8b7586747557a4\" lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li data-lake-id=\"0fcfdc5cc79976495151c7194e8df8ec\"><a target=\"_blank\" href=\"https://segmentfault.com/a/1190000017797561\">《Hexo 博客终极玩法：云端写作，自动部署》</a></li></ul></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">tags: [Hexo, Travis]</p><p data-lake-id=\"1d39a65991d63485922f3dc0d5ffa49b\">categories: [金融狗在假装码农]</p><card type=\"block\" name=\"hr\"></card><p data-lake-id=\"a40f5b7d5057885e7bfc24d13f00464f\">接着上一篇[《Travis部署Hexo记录》](https://blog.kmore.ml/2021/pt=03211800/)继续写。。。</p><p data-lake-id=\"8e7bbd4d78cecc62e1e032811d1aa408\"><br /></p><p data-lake-id=\"cd6af15550d4580dd7bbcfa50adea8e7\">&lt;!-- more --&gt; </p><p data-lake-id=\"1c928ab5346cb642d1b7adb4358b650e\">之前写到，异地写作只要写完之后git push一下，就会有Travis自动部署到github pages中。现在再来进一步进阶一下，在语雀写，并且自动部署，实现语雀与Hexo的互通。</p><h3 data-lake-id=\"2daf66a23318e5c76fe1425337a19787\" id=\"4Vye7\">前置条件</h3><p data-lake-id=\"93d41590f9ed4bff7225dcd1e39490ff\">准备好语雀账号和腾讯云账号（阿里云也可以，但我用的是腾讯云，腾讯云提供的免费数量足够正常使用了，不用担心付费问题）</p><p data-lake-id=\"415caf7ebfa350d8ec0ab987ca5a6980\"><br /></p><h3 data-lake-id=\"722590afff7a476f2d8c2bb180b19637\" id=\"6KYxa\">腾讯云--云函数</h3><p data-lake-id=\"53c44089627d69805b5fab4cf4938906\">如果在启用`云函数`中提示你开通什么的话，都选开通就可以。</p><h4 data-lake-id=\"042e53df4b0563b4aa8c2e0937fb1c33\" id=\"8b71243d\">新建云函数</h4><p data-lake-id=\"36cba54f7236f0bb0c507b426628b634\">点开后选择自定义创建。地域我选的`广州`，据说只有广州和北京的能用，这个可以自己试试吧。运行环境选`php7`，函数名随意啦。</p><p data-lake-id=\"8cba53c3c14dd5f50546d22fe1e1b8db\">![新建云函数](https://z3.ax1x.com/2021/03/25/6XfT2j.png)</p><h4 data-lake-id=\"9e4dae3d6110955e3fb038d37d18c232\" id=\"vvxC7\">建立函数</h4><p data-lake-id=\"cc21b43e38c1e6b3e8131998d588f469\">把下面这段代码复制到代码框里。</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3C%3Fphp%5Cnfunction%20main_handler(%24event%2C%20%24context)%20%7B%5Cn%20%20%20%20%2F%2F%20%E8%A7%A3%E6%9E%90%E8%AF%AD%E9%9B%80post%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%24update_title%20%3D%20''%3B%5Cn%20%20%20%20if(%24event-%3Ebody)%7B%5Cn%20%20%20%20%20%20%20%20%24yuque_data%3D%20json_decode(%24event-%3Ebody)%3B%5Cn%20%20%20%20%20%20%20%20%24update_title%20.%3D%20%24yuque_data-%3Edata-%3Etitle%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96travis-ci%E7%9A%84%E4%BB%93%E5%BA%93%E4%BF%A1%E6%81%AF%5Cn%20%20%20%20%2F%2F%20curl%20-X%20GET%20https%3A%2F%2Fapi.travis-ci.com%2Fowner%2FShimingLuo%2Frepos%20-H%20'Authorization%3A%20token%20XXXXXXXXXX'%20-H%20'Travis-API-Version%3A%203'%5Cn%20%20%20%20%2F%2F%20%E4%BD%BF%E7%94%A8%20repository.id%E3%80%81repository.slug%5Cn%20%20%20%20%2F%2F%20default%20params%5Cn%20%20%20%20%24repos%20%3D%20'xxxxxx'%3B%20%20%2F%2F%20%E4%BD%A0%E7%9A%84Travis%E4%BB%93%E5%BA%93id%20%E6%88%96%20slug%5Cn%20%20%20%20%24token%20%3D%20'xxxxxx'%3B%20%2F%2F%20%E4%BD%A0%E7%9A%84%E7%99%BB%E5%BD%95Travis%20token%5Cn%20%20%20%20%24message%20%3D%20date(%5C%22Y%2Fm%2Fd%5C%22).'%3Ayuque%20update%3A'.%24update_title%3B%5Cn%20%20%20%20%24branch%20%3D%20'blog-source'%3B%20%2F%2F%E9%9C%80%E8%A6%81%E8%AF%BB%E5%8F%96%E7%9A%84branch%5Cn%20%20%20%20%2F%2F%20post%20params%5Cn%20%20%20%20%24queryString%20%3D%20%24event-%3EqueryString%3B%5Cn%20%20%20%20%24q_token%20%3D%20%24queryString-%3Etoken%20%3F%20%24queryString-%3Etoken%20%3A%20%24token%3B%5Cn%20%20%20%20%24q_repos%20%3D%20%24queryString-%3Erepos%20%3F%20%24queryString-%3Erepos%20%3A%20%24repos%3B%5Cn%20%20%20%20%24q_message%20%3D%20%24queryString-%3Emessage%20%3F%20%24queryString-%3Emessage%20%3A%20%24message%3B%5Cn%20%20%20%20%24q_branch%20%3D%20%24queryString-%3Ebranch%20%3F%20%24queryString-%3Ebranch%20%3A%20'blog-source'%3B%20%2F%2F%E9%9C%80%E8%A6%81%E8%AF%BB%E5%8F%96%E7%9A%84branch%5Cn%20%20%20%20%2F%2Frequest%20travis%20ci%5Cn%20%20%20%20%24res_info%20%3D%20triggerTravisCI(%24q_repos%2C%20%24q_token%2C%20%24q_message%2C%20%24q_branch)%3B%5Cn%5Cn%20%20%20%20%24res_code%20%3D%200%3B%5Cn%20%20%20%20%24res_message%20%3D%20'%E6%9C%AA%E7%9F%A5'%3B%5Cn%20%20%20%20if(%24res_info%5B'http_code'%5D)%7B%5Cn%20%20%20%20%20%20%20%20%24res_code%20%3D%20%24res_info%5B'http_code'%5D%3B%5Cn%20%20%20%20%20%20%20%20switch(%24res_info%5B'http_code'%5D)%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20200%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20202%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24res_message%20%3D%20'success'%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20default%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24res_message%20%3D%20'faild'%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%24res%20%3D%20array(%5Cn%20%20%20%20%20%20%20%20'status'%3D%3E%24res_code%2C%5Cn%20%20%20%20%20%20%20%20'message'%3D%3E%24res_message%5Cn%20%20%20%20)%3B%5Cn%20%20%20%20return%20%24res%3B%5Cn%7D%5Cn%5Cn%2F*%5Cn*%20%40description%20%20travis%20api%20%2C%20trigger%20a%20build%5Cn*%20%40param%20%24repos%20string%20%E4%BB%93%E5%BA%93ID%E3%80%81slug%5Cn*%20%40param%20%24token%20string%20%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81token%5Cn*%20%40param%20%24message%20string%20%E8%A7%A6%E5%8F%91%E4%BF%A1%E6%81%AF%5Cn*%20%40param%20%24branch%20string%20%E5%88%86%E6%94%AF%5Cn*%20%40return%20%24info%20array%20%E5%9B%9E%E5%8C%85%E4%BF%A1%E6%81%AF%5Cn*%2F%5Cnfunction%20triggerTravisCI%20(%24repos%2C%20%24token%2C%20%24message%3D'yuque%20update'%2C%20%24branch%3D'blog-source')%20%7B%5Cn%20%20%20%20%2F%2F%E5%88%9D%E5%A7%8B%E5%8C%96%5Cn%20%20%20%20%24curl%20%3D%20curl_init()%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E6%8A%93%E5%8F%96%E7%9A%84url%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_URL%2C%20'https%3A%2F%2Fapi.travis-ci.com%2Frepo%2F'.%24repos.'%2Frequests')%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E8%8E%B7%E5%8F%96%E7%9A%84%E4%BF%A1%E6%81%AF%E4%BB%A5%E6%96%87%E4%BB%B6%E6%B5%81%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%BF%94%E5%9B%9E%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%87%BA%E3%80%82%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_RETURNTRANSFER%2C%201)%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AEpost%E6%96%B9%E5%BC%8F%E6%8F%90%E4%BA%A4%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_CUSTOMREQUEST%2C%20%5C%22POST%5C%22)%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AEpost%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%24post_data%20%3D%20json_encode(array(%5Cn%20%20%20%20%20%20%20%20%5C%22request%5C%22%3D%3E%20array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22message%5C%22%3D%3E%24message%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22branch%5C%22%3D%3E%24branch%5Cn%20%20%20%20%20%20%20%20)%5Cn%20%20%20%20))%3B%5Cn%20%20%20%20%24header%20%3D%20array(%5Cn%20%20%20%20%20%20'Content-Type%3A%20application%2Fjson'%2C%5Cn%20%20%20%20%20%20'Travis-API-Version%3A%203'%2C%5Cn%20%20%20%20%20%20'Authorization%3Atoken%20'.%24token%2C%5Cn%20%20%20%20%20%20'Content-Length%3A'%20.%20strlen(%24post_data)%5Cn%20%20%20%20)%3B%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_HTTPHEADER%2C%20%24header)%3B%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_POSTFIELDS%2C%20%24post_data)%3B%5Cn%20%20%20%20%2F%2F%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%5Cn%20%20%20%20%24data%20%3D%20curl_exec(%24curl)%3B%5Cn%20%20%20%20%24info%20%3D%20curl_getinfo(%24curl)%3B%5Cn%20%20%20%20%2F%2F%E5%85%B3%E9%97%ADURL%E8%AF%B7%E6%B1%82%5Cn%20%20%20%20curl_close(%24curl)%3B%5Cn%20%20%20%20return%20%24info%3B%5Cn%7D%5Cn%3F%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22Roqic%22%2C%22autoWrap%22%3Atrue%7D\"></card><h5 data-lake-id=\"e816f1be351bc90e17bcf70e23010ba8\" id=\"kr9nu\">特别注意：</h5><ul data-lake-id=\"d571040066ff43fbd49ee64e078f98b4\"><li data-lake-id=\"125ae8103127344c146766ad18eaae2c\">在Travis中获取token以后，Linux中运行</li></ul><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22curl%20-X%20GET%20https%3A%2F%2Fapi.travis-ci.com%2Fowner%2FShimingLuo%2Frepos%20-H%20'Authorization%3A%20token%20XXXXXXXXXX'%20-H%20'Travis-API-Version%3A%203'%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22o2mS1%22%2C%22autoWrap%22%3Atrue%7D\"></card><p data-lake-id=\"52ceccbe1fe62a2ed8454c4693e4368a\">会返回一个json格式的内容，找到你要运行的repo。理论上，repo id和slug都行，但我只有id成功了，我建议就用id吧。</p><ul data-lake-id=\"6f477f4513d0dbef2224a81d17bdb445\"><li data-lake-id=\"d3656ab03ae31b2b549b2e7f7144da69\">在上面命令的<strong>第16、22、55行</strong>的branch要改成需要操作的branch。例如我的gh page在master branch，但我的源码是在`blog-source`里，这里我都改成了<span>`blog-source`。</span></li></ul><p data-lake-id=\"a40b33ad570786e921788d6b37e7fb45\"><br /></p><h4 data-lake-id=\"f43201ca97dc23457c112ea71bd76127\" id=\"MB19j\"> 触发管理</h4><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22API%E6%9C%8D%E5%8A%A1%E5%90%8D%EF%BC%9ASCF_API_SERVICE%5CnserviceId%EF%BC%9Aservice-5i0acgmi%5CnapiId%EF%BC%9Aapi-kysretyg%5Cn%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%EF%BC%9AANY%5Cn%E5%8F%91%E5%B8%83%E7%8E%AF%E5%A2%83%EF%BC%9A%E5%8F%91%E5%B8%83%5Cn%E9%89%B4%E6%9D%83%E6%96%B9%E5%BC%8F%EF%BC%9A%E5%85%8D%E9%89%B4%E6%9D%83%5Cn%E5%90%AF%E7%94%A8%E9%9B%86%E6%88%90%E5%93%8D%E5%BA%94%EF%BC%9A%E5%B7%B2%E5%90%AF%E7%94%A8%5Cn%E5%90%AF%E7%94%A8Base64%E7%BC%96%E7%A0%81%EF%BC%9A%E6%9C%AA%E5%90%AF%E7%94%A8%5Cn%E6%94%AF%E6%8C%81CORS%EF%BC%9A%E5%90%A6%5Cn%E5%90%8E%E7%AB%AF%E8%B6%85%E6%97%B6%EF%BC%9A15s%5Cn%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%EF%BC%9Ahttps%3A%2F%2Fservice-5i0acgmi-1256168505.gz.apigw.tencentcs.com%2Frelease%2Fxxxxxxx%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22v47Wd%22%2C%22autoWrap%22%3Atrue%7D\"></card><p data-lake-id=\"5a44d864ebb572fdbb3e027b030971c7\">![触发管理](https://z3.ax1x.com/2021/03/25/6Xf7xs.png)</p><p data-lake-id=\"cb5c9b81edb87ed449adeaf92244c0c3\">复制最后一行的访问路径，备用。</p><p data-lake-id=\"ca31993af20afd2c3ae75d086ab09046\">至此，腾讯云这边就解决了。</p><p data-lake-id=\"106119e450d9bfd7bbaf40dee74290d9\"><br /></p><h3 data-lake-id=\"72b78a1dbc72173da823d2ee7a47a159\" id=\"VCIT1\">语雀端</h3><h4 data-lake-id=\"8c0b156f7b90b25f739ac487b355187d\" id=\"qQak6\">新建知识库</h4><p data-lake-id=\"79f95d712bdf2d2fcd236619cec55ac6\">新建一个知识库，类型就选博客吧，这样比较简单，可见范围随意，互联网可见也没啥问题，反正都是写了给大家看的。</p><h4 data-lake-id=\"13c6301c5c5f24fda0b5a0c418d4e73c\" id=\"8cOR2\">查看/变更知识库访问路径</h4><p data-lake-id=\"0e169d7b6258bffefec47b05fe3ec208\">这步比较重要。在新的知识库里，选择设置，能够看到路径的框，开头应该是`yuque.com`，后面跟着第一个，是你的login（这个可以在帐户中设置），第二个是可以编辑状态的，是你的repo名，记录一下，后面会用到</p><h4 data-lake-id=\"70484a28150cf4779bdff68c5f16d6d9\" id=\"zvksX\">获取token</h4><p data-lake-id=\"4096ad941291a762c9f3ce46f9e01b73\">进入到语雀的账号设置中，有一个token的标签，名字随意，至少勾选`读取你的知识库`和`读取你的文档`，然后把一长串token保存备份，也要用到。</p><p data-lake-id=\"73d07c687b40c5394334ca7eb3ab4b1d\">![获取token](https://z3.ax1x.com/2021/03/25/6XhpRJ.png)</p><h4 data-lake-id=\"7413a264c3b398cc8bbb82454e82313c\" id=\"Kyx5o\">配置webhook</h4><p data-lake-id=\"d15f7ae04f1ca2e99f8559b717b415a4\">进到刚才新建的博客repo中，点设置---开发者。</p><p data-lake-id=\"746852047f5b22b0cfb2a8bd5a78089f\">我们来添加一个Web Hook：</p><p data-lake-id=\"72cef99e9d1dd0214bd452744bcf74c6\"><br /></p><ul data-lake-id=\"bfa3165faa426921c4dd89a23fbf6ca8\"><li data-lake-id=\"3c5da86547d3aff0634c1ab0f8650f0e\">把前面在腾讯云里复制出来的访问路径地址，复制到URL栏里</li><li data-lake-id=\"04580610bfdbe0cdcd80f1fe93c8ab76\">在下面勾选中，我是勾选了<strong><span>发布文档、</span></strong><strong><span>更新文档、</span></strong><strong><span>删除文档。</span></strong></li></ul><p data-lake-id=\"5b766f968b3538690456164c5ea1d8d0\">![新建WebHook](https://z3.ax1x.com/2021/03/25/6Xh9z9.png)</p><p data-lake-id=\"f8142b497af7c0bf35dbd3df1675eda9\">添加保存即可！</p><p data-lake-id=\"9d55a20b2dbce2193cf2303811146313\"><br /></p><h3 data-lake-id=\"0a113bd6fb4fb566780100efa9f97106\" id=\"cFY4t\">Hexo配置</h3><h4 data-lake-id=\"add13be52da9e50cce6d2e414a7ce22b\" id=\"7kFhU\">增加dependency</h4><p data-lake-id=\"62bd7c85b5c395d3cb72b3c885c0b8a8\">要使用语雀到hexo，我们需要加2个package。</p><p data-lake-id=\"5f696905250d75e7b1c75609ddd82d88\">分别是`[yuque-hexo] `和`[<span class=\"lake-fontsize-9\" style=\"color: #032F62;\">cross-env](</span>https://github.com/kentcdodds/cross-env<span class=\"lake-fontsize-9\" style=\"color: #032F62;\">)</span>` </p><p data-lake-id=\"1e916096f90cb52a3bd6ea64c4b20f93\">前者是为了读取语雀的文档，后者是为了在Travis中可以读取放在环境变量里的语雀TOKEN</p><p data-lake-id=\"9303db18b03b3c89676d8ecadc0b31eb\">方法是在hexo根目录的`package.json`中的dependencies最后加入两行</p><p data-lake-id=\"f174083e210e896d7b4cbea2d9c2507e\">可以参考我的`[package.json](https://raw.githubusercontent.com/kentsx/blog/blog-source/package.json)`</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%5C%22cross-env%5C%22%3A%20%5C%22%5E7.0.3%5C%22%2C%5Cn%5C%22yuque-hexo%5C%22%3A%20%5C%22%5E1.7.0%5C%22%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22w2yts%22%2C%22autoWrap%22%3Atrue%7D\"></card><h4 data-lake-id=\"f11a0aa49bd78f82756a4612fcd569b5\" id=\"yXLqy\">配置yuque-hexo</h4><p data-lake-id=\"316c746c6211e1cf33c72cbe29b3b23c\">还是在<span>`package.json`中，在最前面加上如下内容：</span></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%20%20%5Cn%7B%5Cn%20%20%5C%22name%5C%22%3A%20%5C%22hexo-site%5C%22%2C%5Cn%20%20%5C%22version%5C%22%3A%20%5C%220.0.0%5C%22%2C%5Cn%20%20%5C%22private%5C%22%3A%20true%2C%5Cn%20%20%5C%22scripts%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22clean%5C%22%3A%20%5C%22hexo%20clean%5C%22%2C%5Cn%20%20%20%20%5C%22clean%3Ayuque%5C%22%3A%20%5C%22yuque-hexo%20clean%5C%22%2C%5Cn%20%20%20%20%5C%22deploy%5C%22%3A%20%5C%22npm%20run%20sync%20%26%26%20hexo%20clean%20%26%26%20hexo%20g%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22hexo%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22version%5C%22%3A%20%5C%225.3.0%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22yuqueConfig%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22postPath%5C%22%3A%20%5C%22source%2F_posts%2Fyuque%5C%22%2C%5Cn%20%20%20%20%5C%22cachePath%5C%22%3A%20%5C%22yuque.json%5C%22%2C%5Cn%20%20%20%20%5C%22mdNameFormat%5C%22%3A%20%5C%22title%5C%22%2C%5Cn%20%20%20%20%5C%22adapter%5C%22%3A%20%5C%22hexo%5C%22%2C%5Cn%20%20%20%20%5C%22concurrency%5C%22%3A%205%2C%5Cn%20%20%20%20%5C%22baseUrl%5C%22%3A%20%5C%22https%3A%2F%2Fwww.yuque.com%2Fapi%2Fv2%5C%22%2C%5Cn%20%20%20%20%5C%22login%5C%22%3A%20%5C%22xxxx%5C%22%2C%5Cn%20%20%20%20%5C%22repo%5C%22%3A%20%5C%22xxxx%5C%22%2C%5Cn%20%20%20%20%5C%22onlyPublished%5C%22%3A%20false%5Cn%20%20%7D%2C%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22GgGhO%22%7D\"></card><p data-lake-id=\"310da5b15f614eaadb5c6426861da417\"> 第21行和22行的内容，替换为前面在语雀里获取的。</p><h4 data-lake-id=\"1de70a6d5c2471dda60c18e0f8af504f\" id=\"JrQpi\">配置.travis.yml文件</h4><p data-lake-id=\"4e5f6396e2c21ba3c6d942de8a6b60af\">上一篇，我们已经建立了这个文件，但只能完成本地到travis的自动部署，现在我们对这个来进行适当调整。以下就是我纠结了时间最长的部分了，经历了无法获取语雀文档内容、无法备份到github等等。</p><p data-lake-id=\"3b7e161cfcdb46ddee6658e7e4352a55\">废话不说，先上代码：</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22language%3A%20node_js%5Cnnode_js%3A%20stable%5Cn%5Cn%5Cn%5Cnbranches%3A%5Cn%20%20only%3A%5Cn%20%20-%20blog-source%5Cn%5Cn%23%20S%3A%20Build%20Lifecycle%5Cnbefore_instal%3A%5Cn-%20export%20TZ%3D'Asia%2FShanghai'%20%23%20%E6%9B%B4%E6%94%B9%E6%97%B6%E5%8C%BA%5Cn%5Cninstall%3A%5Cn%20%20-%20npm%20install%5Cn%5Cn%23%20%E7%BC%93%E5%AD%98%E6%96%87%E4%BB%B6%5Cncache%3A%5Cn%20%20directories%3A%5Cn%20%20%20%20-%20node_modules%5Cn%5Cnscript%3A%5Cn%20%20%23%20-%20npm%20run%20deploy%5Cn%20%20-%20yuque-hexo%20clean%5Cn%20%20-%20cross-env%20YUQUE_TOKEN%3D%24YUQUE_TOKEN%20yuque-hexo%20sync%5Cn%20%20%23%E5%A4%87%E4%BB%BD%E5%88%B0blog-source%20branch%5Cn%20%20-%20git%20init%5Cn%20%20-%20git%20config%20user.name%20%5C%22XXXXX%5C%22%5Cn%20%20-%20git%20config%20user.email%20%5C%22xxxx%40xxxx%5C%22%20%5Cn%20%20-%20git%20checkout%20blog-source%5Cn%20%20-%20git%20add%20.%5Cn%20%20-%20git%20commit%20-m%20%5C%22%20-%23%24TRAVIS_BUILD_NUMBER-TravisCI%20-%20%60date%20%2B%5C%22%25Y-%25m-%25d%20%25H%3A%25M%5C%22%60%5C%22%5Cn%20%20%23%20-%20git%20status%5Cn%20%20-%20git%20push%20--force%20--quiet%20%5C%22https%3A%2F%2F%24%7BGH_TOKEN%7D%40%24%7BGH_REF%7D%5C%22%20blog-source%3Ablog-source%5Cn%20%20-%20hexo%20g%5Cn%5Cnafter_script%3A%5Cn%23%E7%94%9F%E6%88%90%E6%96%B0%E7%9A%84page%E5%88%B0master%5Cn%20%20-%20cd%20.%2Fpublic%5Cn%20%20-%20git%20init%5Cn%20%20-%20git%20config%20user.name%20%5C%22XXXXX%5C%22%20%5Cn%20%20-%20git%20config%20user.email%20%5C%22xxxx%40xxxx%5C%22%20%5Cn%20%20-%20git%20add%20.%5Cn%20%20-%20git%20commit%20-m%20%5C%22%20-%23%24TRAVIS_BUILD_NUMBER-TravisCI%20-%20%60date%20%2B%5C%22%25Y-%25m-%25d%20%25H%3A%25M%5C%22%60%5C%22%5Cn%20%20-%20git%20push%20--force%20--quiet%20%5C%22https%3A%2F%2F%24%7BGH_TOKEN%7D%40%24%7BGH_REF%7D%5C%22%20master%3Amaster%5Cn%23%20E%3A%20Build%20LifeCycle%5Cn%5Cn%23%20branches%3A%5Cn%23%20%20%20only%3A%5Cn%23%20%20%20%20%20-%20blog-source%5Cnenv%3A%5Cn%20global%3A%5Cn%20%20%20-%20GH_REF%3A%20github.com%2Fkentsx%2Fblog.git%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22e28CF%22%7D\"></card><p data-lake-id=\"6e0723e0afc56167b8d8e2fef19871f9\">主要改动就是在`script`一节里，我加入了语雀的部分和备份到github的部分。变动如下：</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%20%20-%20yuque-hexo%20clean%20%23%20%E6%AF%8F%E6%AC%A1%E6%8B%89%E5%8F%96%E8%AF%AD%E9%9B%80%E6%96%87%E6%A1%A3%E5%89%8D%EF%BC%8C%E5%85%88%E6%8A%8A%E5%8E%9F%E6%9D%A5%E7%9A%84%E6%B8%85%E7%A9%BA%5Cn%20%20-%20cross-env%20YUQUE_TOKEN%3D%24YUQUE_TOKEN%20yuque-hexo%20sync%20%5Cn%20%20%23%20%E5%90%8E%E9%9D%A2%E9%9C%80%E8%A6%81%E5%9C%A8Travis%E4%B8%AD%E9%85%8D%E7%BD%AEYUQUE_TOKEN%E5%8F%98%E9%87%8F%EF%BC%8C%E8%BF%99%E9%87%8C%E8%B0%83%E7%94%A8%E4%BA%86cross-env%5Cn%20%20%5Cn%20%20%23%E5%A4%87%E4%BB%BD%E5%88%B0blog-source%20branch%5Cn%20%20-%20git%20init%5Cn%20%20-%20git%20config%20user.name%20%5C%22XXXXX%5C%22%20%23github%E7%99%BB%E5%BD%95%E5%90%8D%5Cn%20%20-%20git%20config%20user.email%20%5C%22xxxx%40xxxx%5C%22%20%23%20github%E9%82%AE%E7%AE%B1%5Cn%20%20-%20git%20checkout%20blog-source%20%20%23%23%E8%BF%99%E6%AD%A5%E5%BE%88%E5%85%B3%E9%94%AE%EF%BC%8C%E4%B8%8D%E7%84%B6%E4%BC%9A%E5%87%BA%E7%8E%B0detached%20HEAD%E6%83%85%E5%86%B5%EF%BC%8Cbranch%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1hexo%E6%BA%90%E7%A0%81branch%5Cn%20%20-%20git%20add%20.%5Cn%20%20-%20git%20commit%20-m%20%5C%22%20-%23%24TRAVIS_BUILD_NUMBER-TravisCI%20-%20%60date%20%2B%5C%22%25Y-%25m-%25d%20%25H%3A%25M%5C%22%60%5C%22%5Cn%20%20%23%20%E8%BF%99%E6%A0%B7%E5%86%99%EF%BC%8C%E5%B0%B1%E8%83%BD%E7%9F%A5%E9%81%93%E6%98%AF%E9%82%A3%E6%AC%A1travis%E9%83%A8%E7%BD%B2push%E8%BF%87%E6%9D%A5%E7%9A%84%E4%BA%86%E3%80%82%5Cn%20%20%23%20-%20git%20status%5Cn%20%20-%20git%20push%20--force%20--quiet%20%5C%22https%3A%2F%2F%24%7BGH_TOKEN%7D%40%24%7BGH_REF%7D%5C%22%20blog-source%3Ablog-source%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22uGAwN%22%2C%22autoWrap%22%3Atrue%7D\"></card><h3 data-lake-id=\"c45c47fe873d1e984cde066f57ae5189\" id=\"tCPQW\">Travis端</h3><p data-lake-id=\"76fb41e29b412c7841acf8afc10b19fb\">在之前的基础上，添加一个环境变量，名称为`YUQUE_TOKEN`，value就是刚才语雀端里那串token</p><p data-lake-id=\"d1a4c8deb1b00aea183c5ca5854df1f4\"><br /></p><p data-lake-id=\"dba5b30ef12813677599cb8a6dae6c0c\"><br /></p><h3 data-lake-id=\"ed33d8c3df84261b341fc65cfe8d789d\" id=\"ielDc\">参考文档</h3><ul data-lake-id=\"eedff1f8de0e184a0f8b7586747557a4\"><li data-lake-id=\"0fcfdc5cc79976495151c7194e8df8ec\"><a target=\"_blank\" href=\"https://segmentfault.com/a/1190000017797561\">《Hexo 博客终极玩法：云端写作，自动部署》</a></li></ul>",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">tags: [Hexo, Travis]</p><p data-lake-id=\"1d39a65991d63485922f3dc0d5ffa49b\">categories: [金融狗在假装码农]</p><card type=\"block\" name=\"hr\"></card><p data-lake-id=\"a40f5b7d5057885e7bfc24d13f00464f\">接着上一篇[《Travis部署Hexo记录》](https://blog.kmore.ml/2021/pt=03211800/)继续写。。。</p><p data-lake-id=\"8e7bbd4d78cecc62e1e032811d1aa408\"><br /></p><p data-lake-id=\"cd6af15550d4580dd7bbcfa50adea8e7\">&lt;!-- more --&gt; </p><p data-lake-id=\"1c928ab5346cb642d1b7adb4358b650e\">之前写到，异地写作只要写完之后git push一下，就会有Travis自动部署到github pages中。现在再来进一步进阶一下，在语雀写，并且自动部署，实现语雀与Hexo的互通。</p><h3 data-lake-id=\"2daf66a23318e5c76fe1425337a19787\" id=\"4Vye7\">前置条件</h3><p data-lake-id=\"93d41590f9ed4bff7225dcd1e39490ff\">准备好语雀账号和腾讯云账号（阿里云也可以，但我用的是腾讯云，腾讯云提供的免费数量足够正常使用了，不用担心付费问题）</p><p data-lake-id=\"415caf7ebfa350d8ec0ab987ca5a6980\"><br /></p><h3 data-lake-id=\"722590afff7a476f2d8c2bb180b19637\" id=\"6KYxa\">腾讯云--云函数</h3><p data-lake-id=\"53c44089627d69805b5fab4cf4938906\">如果在启用`云函数`中提示你开通什么的话，都选开通就可以。</p><h4 data-lake-id=\"042e53df4b0563b4aa8c2e0937fb1c33\" id=\"8b71243d\">新建云函数</h4><p data-lake-id=\"36cba54f7236f0bb0c507b426628b634\">点开后选择自定义创建。地域我选的`广州`，据说只有广州和北京的能用，这个可以自己试试吧。运行环境选`php7`，函数名随意啦。</p><p data-lake-id=\"8cba53c3c14dd5f50546d22fe1e1b8db\">![新建云函数](https://z3.ax1x.com/2021/03/25/6XfT2j.png)</p><h4 data-lake-id=\"9e4dae3d6110955e3fb038d37d18c232\" id=\"vvxC7\">建立函数</h4><p data-lake-id=\"cc21b43e38c1e6b3e8131998d588f469\">把下面这段代码复制到代码框里。</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3C%3Fphp%5Cnfunction%20main_handler(%24event%2C%20%24context)%20%7B%5Cn%20%20%20%20%2F%2F%20%E8%A7%A3%E6%9E%90%E8%AF%AD%E9%9B%80post%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%24update_title%20%3D%20''%3B%5Cn%20%20%20%20if(%24event-%3Ebody)%7B%5Cn%20%20%20%20%20%20%20%20%24yuque_data%3D%20json_decode(%24event-%3Ebody)%3B%5Cn%20%20%20%20%20%20%20%20%24update_title%20.%3D%20%24yuque_data-%3Edata-%3Etitle%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96travis-ci%E7%9A%84%E4%BB%93%E5%BA%93%E4%BF%A1%E6%81%AF%5Cn%20%20%20%20%2F%2F%20curl%20-X%20GET%20https%3A%2F%2Fapi.travis-ci.com%2Fowner%2FShimingLuo%2Frepos%20-H%20'Authorization%3A%20token%20XXXXXXXXXX'%20-H%20'Travis-API-Version%3A%203'%5Cn%20%20%20%20%2F%2F%20%E4%BD%BF%E7%94%A8%20repository.id%E3%80%81repository.slug%5Cn%20%20%20%20%2F%2F%20default%20params%5Cn%20%20%20%20%24repos%20%3D%20'xxxxxx'%3B%20%20%2F%2F%20%E4%BD%A0%E7%9A%84Travis%E4%BB%93%E5%BA%93id%20%E6%88%96%20slug%5Cn%20%20%20%20%24token%20%3D%20'xxxxxx'%3B%20%2F%2F%20%E4%BD%A0%E7%9A%84%E7%99%BB%E5%BD%95Travis%20token%5Cn%20%20%20%20%24message%20%3D%20date(%5C%22Y%2Fm%2Fd%5C%22).'%3Ayuque%20update%3A'.%24update_title%3B%5Cn%20%20%20%20%24branch%20%3D%20'blog-source'%3B%20%2F%2F%E9%9C%80%E8%A6%81%E8%AF%BB%E5%8F%96%E7%9A%84branch%5Cn%20%20%20%20%2F%2F%20post%20params%5Cn%20%20%20%20%24queryString%20%3D%20%24event-%3EqueryString%3B%5Cn%20%20%20%20%24q_token%20%3D%20%24queryString-%3Etoken%20%3F%20%24queryString-%3Etoken%20%3A%20%24token%3B%5Cn%20%20%20%20%24q_repos%20%3D%20%24queryString-%3Erepos%20%3F%20%24queryString-%3Erepos%20%3A%20%24repos%3B%5Cn%20%20%20%20%24q_message%20%3D%20%24queryString-%3Emessage%20%3F%20%24queryString-%3Emessage%20%3A%20%24message%3B%5Cn%20%20%20%20%24q_branch%20%3D%20%24queryString-%3Ebranch%20%3F%20%24queryString-%3Ebranch%20%3A%20'blog-source'%3B%20%2F%2F%E9%9C%80%E8%A6%81%E8%AF%BB%E5%8F%96%E7%9A%84branch%5Cn%20%20%20%20%2F%2Frequest%20travis%20ci%5Cn%20%20%20%20%24res_info%20%3D%20triggerTravisCI(%24q_repos%2C%20%24q_token%2C%20%24q_message%2C%20%24q_branch)%3B%5Cn%5Cn%20%20%20%20%24res_code%20%3D%200%3B%5Cn%20%20%20%20%24res_message%20%3D%20'%E6%9C%AA%E7%9F%A5'%3B%5Cn%20%20%20%20if(%24res_info%5B'http_code'%5D)%7B%5Cn%20%20%20%20%20%20%20%20%24res_code%20%3D%20%24res_info%5B'http_code'%5D%3B%5Cn%20%20%20%20%20%20%20%20switch(%24res_info%5B'http_code'%5D)%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20200%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20202%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24res_message%20%3D%20'success'%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20default%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24res_message%20%3D%20'faild'%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%24res%20%3D%20array(%5Cn%20%20%20%20%20%20%20%20'status'%3D%3E%24res_code%2C%5Cn%20%20%20%20%20%20%20%20'message'%3D%3E%24res_message%5Cn%20%20%20%20)%3B%5Cn%20%20%20%20return%20%24res%3B%5Cn%7D%5Cn%5Cn%2F*%5Cn*%20%40description%20%20travis%20api%20%2C%20trigger%20a%20build%5Cn*%20%40param%20%24repos%20string%20%E4%BB%93%E5%BA%93ID%E3%80%81slug%5Cn*%20%40param%20%24token%20string%20%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81token%5Cn*%20%40param%20%24message%20string%20%E8%A7%A6%E5%8F%91%E4%BF%A1%E6%81%AF%5Cn*%20%40param%20%24branch%20string%20%E5%88%86%E6%94%AF%5Cn*%20%40return%20%24info%20array%20%E5%9B%9E%E5%8C%85%E4%BF%A1%E6%81%AF%5Cn*%2F%5Cnfunction%20triggerTravisCI%20(%24repos%2C%20%24token%2C%20%24message%3D'yuque%20update'%2C%20%24branch%3D'blog-source')%20%7B%5Cn%20%20%20%20%2F%2F%E5%88%9D%E5%A7%8B%E5%8C%96%5Cn%20%20%20%20%24curl%20%3D%20curl_init()%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E6%8A%93%E5%8F%96%E7%9A%84url%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_URL%2C%20'https%3A%2F%2Fapi.travis-ci.com%2Frepo%2F'.%24repos.'%2Frequests')%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E8%8E%B7%E5%8F%96%E7%9A%84%E4%BF%A1%E6%81%AF%E4%BB%A5%E6%96%87%E4%BB%B6%E6%B5%81%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%BF%94%E5%9B%9E%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%87%BA%E3%80%82%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_RETURNTRANSFER%2C%201)%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AEpost%E6%96%B9%E5%BC%8F%E6%8F%90%E4%BA%A4%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_CUSTOMREQUEST%2C%20%5C%22POST%5C%22)%3B%5Cn%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AEpost%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%24post_data%20%3D%20json_encode(array(%5Cn%20%20%20%20%20%20%20%20%5C%22request%5C%22%3D%3E%20array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22message%5C%22%3D%3E%24message%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22branch%5C%22%3D%3E%24branch%5Cn%20%20%20%20%20%20%20%20)%5Cn%20%20%20%20))%3B%5Cn%20%20%20%20%24header%20%3D%20array(%5Cn%20%20%20%20%20%20'Content-Type%3A%20application%2Fjson'%2C%5Cn%20%20%20%20%20%20'Travis-API-Version%3A%203'%2C%5Cn%20%20%20%20%20%20'Authorization%3Atoken%20'.%24token%2C%5Cn%20%20%20%20%20%20'Content-Length%3A'%20.%20strlen(%24post_data)%5Cn%20%20%20%20)%3B%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_HTTPHEADER%2C%20%24header)%3B%5Cn%20%20%20%20curl_setopt(%24curl%2C%20CURLOPT_POSTFIELDS%2C%20%24post_data)%3B%5Cn%20%20%20%20%2F%2F%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%5Cn%20%20%20%20%24data%20%3D%20curl_exec(%24curl)%3B%5Cn%20%20%20%20%24info%20%3D%20curl_getinfo(%24curl)%3B%5Cn%20%20%20%20%2F%2F%E5%85%B3%E9%97%ADURL%E8%AF%B7%E6%B1%82%5Cn%20%20%20%20curl_close(%24curl)%3B%5Cn%20%20%20%20return%20%24info%3B%5Cn%7D%5Cn%3F%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22Roqic%22%2C%22autoWrap%22%3Atrue%7D\"></card><h5 data-lake-id=\"e816f1be351bc90e17bcf70e23010ba8\" id=\"kr9nu\">特别注意：</h5><ul data-lake-id=\"d571040066ff43fbd49ee64e078f98b4\"><li data-lake-id=\"125ae8103127344c146766ad18eaae2c\">在Travis中获取token以后，Linux中运行</li></ul><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22curl%20-X%20GET%20https%3A%2F%2Fapi.travis-ci.com%2Fowner%2FShimingLuo%2Frepos%20-H%20'Authorization%3A%20token%20XXXXXXXXXX'%20-H%20'Travis-API-Version%3A%203'%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22o2mS1%22%2C%22autoWrap%22%3Atrue%7D\"></card><p data-lake-id=\"52ceccbe1fe62a2ed8454c4693e4368a\">会返回一个json格式的内容，找到你要运行的repo。理论上，repo id和slug都行，但我只有id成功了，我建议就用id吧。</p><ul data-lake-id=\"6f477f4513d0dbef2224a81d17bdb445\"><li data-lake-id=\"d3656ab03ae31b2b549b2e7f7144da69\">在上面命令的<strong>第16、22、55行</strong>的branch要改成需要操作的branch。例如我的gh page在master branch，但我的源码是在`blog-source`里，这里我都改成了<span>`blog-source`。</span></li></ul><p data-lake-id=\"a40b33ad570786e921788d6b37e7fb45\"><br /></p><h4 data-lake-id=\"f43201ca97dc23457c112ea71bd76127\" id=\"MB19j\"> 触发管理</h4><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22API%E6%9C%8D%E5%8A%A1%E5%90%8D%EF%BC%9ASCF_API_SERVICE%5CnserviceId%EF%BC%9Aservice-5i0acgmi%5CnapiId%EF%BC%9Aapi-kysretyg%5Cn%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%EF%BC%9AANY%5Cn%E5%8F%91%E5%B8%83%E7%8E%AF%E5%A2%83%EF%BC%9A%E5%8F%91%E5%B8%83%5Cn%E9%89%B4%E6%9D%83%E6%96%B9%E5%BC%8F%EF%BC%9A%E5%85%8D%E9%89%B4%E6%9D%83%5Cn%E5%90%AF%E7%94%A8%E9%9B%86%E6%88%90%E5%93%8D%E5%BA%94%EF%BC%9A%E5%B7%B2%E5%90%AF%E7%94%A8%5Cn%E5%90%AF%E7%94%A8Base64%E7%BC%96%E7%A0%81%EF%BC%9A%E6%9C%AA%E5%90%AF%E7%94%A8%5Cn%E6%94%AF%E6%8C%81CORS%EF%BC%9A%E5%90%A6%5Cn%E5%90%8E%E7%AB%AF%E8%B6%85%E6%97%B6%EF%BC%9A15s%5Cn%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%EF%BC%9Ahttps%3A%2F%2Fservice-5i0acgmi-1256168505.gz.apigw.tencentcs.com%2Frelease%2Fxxxxxxx%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22v47Wd%22%2C%22autoWrap%22%3Atrue%7D\"></card><p data-lake-id=\"5a44d864ebb572fdbb3e027b030971c7\">![触发管理](https://z3.ax1x.com/2021/03/25/6Xf7xs.png)</p><p data-lake-id=\"cb5c9b81edb87ed449adeaf92244c0c3\">复制最后一行的访问路径，备用。</p><p data-lake-id=\"ca31993af20afd2c3ae75d086ab09046\">至此，腾讯云这边就解决了。</p><p data-lake-id=\"106119e450d9bfd7bbaf40dee74290d9\"><br /></p><h3 data-lake-id=\"72b78a1dbc72173da823d2ee7a47a159\" id=\"VCIT1\">语雀端</h3><h4 data-lake-id=\"8c0b156f7b90b25f739ac487b355187d\" id=\"qQak6\">新建知识库</h4><p data-lake-id=\"79f95d712bdf2d2fcd236619cec55ac6\">新建一个知识库，类型就选博客吧，这样比较简单，可见范围随意，互联网可见也没啥问题，反正都是写了给大家看的。</p><h4 data-lake-id=\"13c6301c5c5f24fda0b5a0c418d4e73c\" id=\"8cOR2\">查看/变更知识库访问路径</h4><p data-lake-id=\"0e169d7b6258bffefec47b05fe3ec208\">这步比较重要。在新的知识库里，选择设置，能够看到路径的框，开头应该是`yuque.com`，后面跟着第一个，是你的login（这个可以在帐户中设置），第二个是可以编辑状态的，是你的repo名，记录一下，后面会用到</p><h4 data-lake-id=\"70484a28150cf4779bdff68c5f16d6d9\" id=\"zvksX\">获取token</h4><p data-lake-id=\"4096ad941291a762c9f3ce46f9e01b73\">进入到语雀的账号设置中，有一个token的标签，名字随意，至少勾选`读取你的知识库`和`读取你的文档`，然后把一长串token保存备份，也要用到。</p><p data-lake-id=\"73d07c687b40c5394334ca7eb3ab4b1d\">![获取token](https://z3.ax1x.com/2021/03/25/6XhpRJ.png)</p><h4 data-lake-id=\"7413a264c3b398cc8bbb82454e82313c\" id=\"Kyx5o\">配置webhook</h4><p data-lake-id=\"d15f7ae04f1ca2e99f8559b717b415a4\">进到刚才新建的博客repo中，点设置---开发者。</p><p data-lake-id=\"746852047f5b22b0cfb2a8bd5a78089f\">我们来添加一个Web Hook：</p><p data-lake-id=\"72cef99e9d1dd0214bd452744bcf74c6\"><br /></p><ul data-lake-id=\"bfa3165faa426921c4dd89a23fbf6ca8\"><li data-lake-id=\"3c5da86547d3aff0634c1ab0f8650f0e\">把前面在腾讯云里复制出来的访问路径地址，复制到URL栏里</li><li data-lake-id=\"04580610bfdbe0cdcd80f1fe93c8ab76\">在下面勾选中，我是勾选了<strong><span>发布文档、</span></strong><strong><span>更新文档、</span></strong><strong><span>删除文档。</span></strong></li></ul><p data-lake-id=\"5b766f968b3538690456164c5ea1d8d0\">![新建WebHook](https://z3.ax1x.com/2021/03/25/6Xh9z9.png)</p><p data-lake-id=\"f8142b497af7c0bf35dbd3df1675eda9\">添加保存即可！</p><p data-lake-id=\"9d55a20b2dbce2193cf2303811146313\"><br /></p><h3 data-lake-id=\"0a113bd6fb4fb566780100efa9f97106\" id=\"cFY4t\">Hexo配置</h3><h4 data-lake-id=\"add13be52da9e50cce6d2e414a7ce22b\" id=\"7kFhU\">增加dependency</h4><p data-lake-id=\"62bd7c85b5c395d3cb72b3c885c0b8a8\">要使用语雀到hexo，我们需要加2个package。</p><p data-lake-id=\"5f696905250d75e7b1c75609ddd82d88\">分别是`[yuque-hexo] `和`[<span class=\"lake-fontsize-9\" style=\"color: #032F62;\">cross-env](</span>https://github.com/kentcdodds/cross-env<span class=\"lake-fontsize-9\" style=\"color: #032F62;\">)</span>` </p><p data-lake-id=\"1e916096f90cb52a3bd6ea64c4b20f93\">前者是为了读取语雀的文档，后者是为了在Travis中可以读取放在环境变量里的语雀TOKEN</p><p data-lake-id=\"9303db18b03b3c89676d8ecadc0b31eb\">方法是在hexo根目录的`package.json`中的dependencies最后加入两行</p><p data-lake-id=\"f174083e210e896d7b4cbea2d9c2507e\">可以参考我的`[package.json](https://raw.githubusercontent.com/kentsx/blog/blog-source/package.json)`</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%5C%22cross-env%5C%22%3A%20%5C%22%5E7.0.3%5C%22%2C%5Cn%5C%22yuque-hexo%5C%22%3A%20%5C%22%5E1.7.0%5C%22%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22w2yts%22%2C%22autoWrap%22%3Atrue%7D\"></card><h4 data-lake-id=\"f11a0aa49bd78f82756a4612fcd569b5\" id=\"yXLqy\">配置yuque-hexo</h4><p data-lake-id=\"316c746c6211e1cf33c72cbe29b3b23c\">还是在<span>`package.json`中，在最前面加上如下内容：</span></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%20%20%5Cn%7B%5Cn%20%20%5C%22name%5C%22%3A%20%5C%22hexo-site%5C%22%2C%5Cn%20%20%5C%22version%5C%22%3A%20%5C%220.0.0%5C%22%2C%5Cn%20%20%5C%22private%5C%22%3A%20true%2C%5Cn%20%20%5C%22scripts%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22clean%5C%22%3A%20%5C%22hexo%20clean%5C%22%2C%5Cn%20%20%20%20%5C%22clean%3Ayuque%5C%22%3A%20%5C%22yuque-hexo%20clean%5C%22%2C%5Cn%20%20%20%20%5C%22deploy%5C%22%3A%20%5C%22npm%20run%20sync%20%26%26%20hexo%20clean%20%26%26%20hexo%20g%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22hexo%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22version%5C%22%3A%20%5C%225.3.0%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22yuqueConfig%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22postPath%5C%22%3A%20%5C%22source%2F_posts%2Fyuque%5C%22%2C%5Cn%20%20%20%20%5C%22cachePath%5C%22%3A%20%5C%22yuque.json%5C%22%2C%5Cn%20%20%20%20%5C%22mdNameFormat%5C%22%3A%20%5C%22title%5C%22%2C%5Cn%20%20%20%20%5C%22adapter%5C%22%3A%20%5C%22hexo%5C%22%2C%5Cn%20%20%20%20%5C%22concurrency%5C%22%3A%205%2C%5Cn%20%20%20%20%5C%22baseUrl%5C%22%3A%20%5C%22https%3A%2F%2Fwww.yuque.com%2Fapi%2Fv2%5C%22%2C%5Cn%20%20%20%20%5C%22login%5C%22%3A%20%5C%22xxxx%5C%22%2C%5Cn%20%20%20%20%5C%22repo%5C%22%3A%20%5C%22xxxx%5C%22%2C%5Cn%20%20%20%20%5C%22onlyPublished%5C%22%3A%20false%5Cn%20%20%7D%2C%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22GgGhO%22%7D\"></card><p data-lake-id=\"310da5b15f614eaadb5c6426861da417\"> 第21行和22行的内容，替换为前面在语雀里获取的。</p><h4 data-lake-id=\"1de70a6d5c2471dda60c18e0f8af504f\" id=\"JrQpi\">配置.travis.yml文件</h4><p data-lake-id=\"4e5f6396e2c21ba3c6d942de8a6b60af\">上一篇，我们已经建立了这个文件，但只能完成本地到travis的自动部署，现在我们对这个来进行适当调整。以下就是我纠结了时间最长的部分了，经历了无法获取语雀文档内容、无法备份到github等等。</p><p data-lake-id=\"3b7e161cfcdb46ddee6658e7e4352a55\">废话不说，先上代码：</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22language%3A%20node_js%5Cnnode_js%3A%20stable%5Cn%5Cn%5Cn%5Cnbranches%3A%5Cn%20%20only%3A%5Cn%20%20-%20blog-source%5Cn%5Cn%23%20S%3A%20Build%20Lifecycle%5Cnbefore_instal%3A%5Cn-%20export%20TZ%3D'Asia%2FShanghai'%20%23%20%E6%9B%B4%E6%94%B9%E6%97%B6%E5%8C%BA%5Cn%5Cninstall%3A%5Cn%20%20-%20npm%20install%5Cn%5Cn%23%20%E7%BC%93%E5%AD%98%E6%96%87%E4%BB%B6%5Cncache%3A%5Cn%20%20directories%3A%5Cn%20%20%20%20-%20node_modules%5Cn%5Cnscript%3A%5Cn%20%20%23%20-%20npm%20run%20deploy%5Cn%20%20-%20yuque-hexo%20clean%5Cn%20%20-%20cross-env%20YUQUE_TOKEN%3D%24YUQUE_TOKEN%20yuque-hexo%20sync%5Cn%20%20%23%E5%A4%87%E4%BB%BD%E5%88%B0blog-source%20branch%5Cn%20%20-%20git%20init%5Cn%20%20-%20git%20config%20user.name%20%5C%22XXXXX%5C%22%5Cn%20%20-%20git%20config%20user.email%20%5C%22xxxx%40xxxx%5C%22%20%5Cn%20%20-%20git%20checkout%20blog-source%5Cn%20%20-%20git%20add%20.%5Cn%20%20-%20git%20commit%20-m%20%5C%22%20-%23%24TRAVIS_BUILD_NUMBER-TravisCI%20-%20%60date%20%2B%5C%22%25Y-%25m-%25d%20%25H%3A%25M%5C%22%60%5C%22%5Cn%20%20%23%20-%20git%20status%5Cn%20%20-%20git%20push%20--force%20--quiet%20%5C%22https%3A%2F%2F%24%7BGH_TOKEN%7D%40%24%7BGH_REF%7D%5C%22%20blog-source%3Ablog-source%5Cn%20%20-%20hexo%20g%5Cn%5Cnafter_script%3A%5Cn%23%E7%94%9F%E6%88%90%E6%96%B0%E7%9A%84page%E5%88%B0master%5Cn%20%20-%20cd%20.%2Fpublic%5Cn%20%20-%20git%20init%5Cn%20%20-%20git%20config%20user.name%20%5C%22XXXXX%5C%22%20%5Cn%20%20-%20git%20config%20user.email%20%5C%22xxxx%40xxxx%5C%22%20%5Cn%20%20-%20git%20add%20.%5Cn%20%20-%20git%20commit%20-m%20%5C%22%20-%23%24TRAVIS_BUILD_NUMBER-TravisCI%20-%20%60date%20%2B%5C%22%25Y-%25m-%25d%20%25H%3A%25M%5C%22%60%5C%22%5Cn%20%20-%20git%20push%20--force%20--quiet%20%5C%22https%3A%2F%2F%24%7BGH_TOKEN%7D%40%24%7BGH_REF%7D%5C%22%20master%3Amaster%5Cn%23%20E%3A%20Build%20LifeCycle%5Cn%5Cn%23%20branches%3A%5Cn%23%20%20%20only%3A%5Cn%23%20%20%20%20%20-%20blog-source%5Cnenv%3A%5Cn%20global%3A%5Cn%20%20%20-%20GH_REF%3A%20github.com%2Fkentsx%2Fblog.git%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22e28CF%22%7D\"></card><p data-lake-id=\"6e0723e0afc56167b8d8e2fef19871f9\">主要改动就是在`script`一节里，我加入了语雀的部分和备份到github的部分。变动如下：</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%20%20-%20yuque-hexo%20clean%20%23%20%E6%AF%8F%E6%AC%A1%E6%8B%89%E5%8F%96%E8%AF%AD%E9%9B%80%E6%96%87%E6%A1%A3%E5%89%8D%EF%BC%8C%E5%85%88%E6%8A%8A%E5%8E%9F%E6%9D%A5%E7%9A%84%E6%B8%85%E7%A9%BA%5Cn%20%20-%20cross-env%20YUQUE_TOKEN%3D%24YUQUE_TOKEN%20yuque-hexo%20sync%20%5Cn%20%20%23%20%E5%90%8E%E9%9D%A2%E9%9C%80%E8%A6%81%E5%9C%A8Travis%E4%B8%AD%E9%85%8D%E7%BD%AEYUQUE_TOKEN%E5%8F%98%E9%87%8F%EF%BC%8C%E8%BF%99%E9%87%8C%E8%B0%83%E7%94%A8%E4%BA%86cross-env%5Cn%20%20%5Cn%20%20%23%E5%A4%87%E4%BB%BD%E5%88%B0blog-source%20branch%5Cn%20%20-%20git%20init%5Cn%20%20-%20git%20config%20user.name%20%5C%22XXXXX%5C%22%20%23github%E7%99%BB%E5%BD%95%E5%90%8D%5Cn%20%20-%20git%20config%20user.email%20%5C%22xxxx%40xxxx%5C%22%20%23%20github%E9%82%AE%E7%AE%B1%5Cn%20%20-%20git%20checkout%20blog-source%20%20%23%23%E8%BF%99%E6%AD%A5%E5%BE%88%E5%85%B3%E9%94%AE%EF%BC%8C%E4%B8%8D%E7%84%B6%E4%BC%9A%E5%87%BA%E7%8E%B0detached%20HEAD%E6%83%85%E5%86%B5%EF%BC%8Cbranch%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1hexo%E6%BA%90%E7%A0%81branch%5Cn%20%20-%20git%20add%20.%5Cn%20%20-%20git%20commit%20-m%20%5C%22%20-%23%24TRAVIS_BUILD_NUMBER-TravisCI%20-%20%60date%20%2B%5C%22%25Y-%25m-%25d%20%25H%3A%25M%5C%22%60%5C%22%5Cn%20%20%23%20%E8%BF%99%E6%A0%B7%E5%86%99%EF%BC%8C%E5%B0%B1%E8%83%BD%E7%9F%A5%E9%81%93%E6%98%AF%E9%82%A3%E6%AC%A1travis%E9%83%A8%E7%BD%B2push%E8%BF%87%E6%9D%A5%E7%9A%84%E4%BA%86%E3%80%82%5Cn%20%20%23%20-%20git%20status%5Cn%20%20-%20git%20push%20--force%20--quiet%20%5C%22https%3A%2F%2F%24%7BGH_TOKEN%7D%40%24%7BGH_REF%7D%5C%22%20blog-source%3Ablog-source%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22uGAwN%22%2C%22autoWrap%22%3Atrue%7D\"></card><h3 data-lake-id=\"c45c47fe873d1e984cde066f57ae5189\" id=\"tCPQW\">Travis端</h3><p data-lake-id=\"76fb41e29b412c7841acf8afc10b19fb\">在之前的基础上，添加一个环境变量，名称为`YUQUE_TOKEN`，value就是刚才语雀端里那串token</p><p data-lake-id=\"d1a4c8deb1b00aea183c5ca5854df1f4\"><br /></p><p data-lake-id=\"dba5b30ef12813677599cb8a6dae6c0c\"><br /></p><h3 data-lake-id=\"ed33d8c3df84261b341fc65cfe8d789d\" id=\"ielDc\">参考文档</h3><ul data-lake-id=\"eedff1f8de0e184a0f8b7586747557a4\"><li data-lake-id=\"0fcfdc5cc79976495151c7194e8df8ec\"><a target=\"_blank\" href=\"https://segmentfault.com/a/1190000017797561\">《Hexo 博客终极玩法：云端写作，自动部署》</a></li></ul>",
    "public": 1,
    "status": 1,
    "view_status": 0,
    "read_status": 1,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-03-25T16:03:08.000Z",
    "deleted_at": null,
    "created_at": "2021-03-25T14:44:05.000Z",
    "updated_at": "2021-03-25T16:03:08.000Z",
    "published_at": "2021-03-25T16:03:08.000Z",
    "first_published_at": "2021-03-25T16:03:08.000Z",
    "word_count": 1917,
    "cover": "",
    "description": null,
    "custom_description": "接着上一篇[《Travis部署Hexo记录》](https://blog.kmore.ml/2021/pt=03211800/)继续写。。。",
    "hits": 0,
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 33596165,
    "slug": "apwg1t",
    "title": "Hexo template",
    "book_id": 654573,
    "book": {
      "id": 654573,
      "type": "Column",
      "slug": "blog",
      "name": "Kmore Blog",
      "user_id": 682563,
      "description": "backup for blogs",
      "creator_id": 682563,
      "public": 1,
      "items_count": 3,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-03-25T16:03:08.160Z",
      "updated_at": "2021-03-25T16:03:08.000Z",
      "created_at": "2019-12-25T05:29:40.000Z",
      "namespace": "kmore/blog",
      "user": {
        "id": 682563,
        "type": "User",
        "login": "kmore",
        "name": "KentX",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 6,
        "public_books_count": 2,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2019-12-18T03:29:15.000Z",
        "updated_at": "2021-03-25T15:17:52.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 682563,
    "creator": {
      "id": 682563,
      "type": "User",
      "login": "kmore",
      "name": "KentX",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 6,
      "public_books_count": 2,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2019-12-18T03:29:15.000Z",
      "updated_at": "2021-03-25T15:17:52.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "",
    "body_draft": "tags: []<br />categories: [下班以后嗨起来,金融狗在假装码农,金融狗工作日常,学术,转移过往内容,阅识]\n\n---\n\n\n<br />\n<br /><!-- more --> \n",
    "body_html": "",
    "body_lake": "",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">tags: []</p><p data-lake-id=\"1d39a65991d63485922f3dc0d5ffa49b\">categories: [下班以后嗨起来,金融狗在假装码农,金融狗工作日常,学术,转移过往内容,阅识<cursor />]</p><card type=\"block\" name=\"hr\"></card><p data-lake-id=\"a40f5b7d5057885e7bfc24d13f00464f\"><br /></p><p data-lake-id=\"8e7bbd4d78cecc62e1e032811d1aa408\"><br /></p><p data-lake-id=\"cd6af15550d4580dd7bbcfa50adea8e7\">&lt;!-- more --&gt; </p>",
    "public": 1,
    "status": 0,
    "view_status": 0,
    "read_status": 0,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-03-25T14:09:59.000Z",
    "deleted_at": null,
    "created_at": "2021-03-25T14:09:59.000Z",
    "updated_at": "2021-03-25T14:09:59.000Z",
    "published_at": null,
    "first_published_at": null,
    "word_count": 0,
    "cover": null,
    "description": null,
    "custom_description": null,
    "hits": 0,
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 33516607,
    "slug": "vv437q",
    "title": "深夜发一篇",
    "book_id": 654573,
    "book": {
      "id": 654573,
      "type": "Column",
      "slug": "blog",
      "name": "Kmore Blog",
      "user_id": 682563,
      "description": "backup for blogs",
      "creator_id": 682563,
      "public": 1,
      "items_count": 3,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-03-25T16:03:08.160Z",
      "updated_at": "2021-03-25T16:03:08.000Z",
      "created_at": "2019-12-25T05:29:40.000Z",
      "namespace": "kmore/blog",
      "user": {
        "id": 682563,
        "type": "User",
        "login": "kmore",
        "name": "KentX",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 6,
        "public_books_count": 2,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2019-12-18T03:29:15.000Z",
        "updated_at": "2021-03-25T15:17:52.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 682563,
    "creator": {
      "id": 682563,
      "type": "User",
      "login": "kmore",
      "name": "KentX",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 6,
      "public_books_count": 2,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2019-12-18T03:29:15.000Z",
      "updated_at": "2021-03-25T15:17:52.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "tags: [吐槽]<br />categories: [下班以后嗨起来]\n\n---\n\n无奈实在是太累了，外加一些其他的事情，就想吐槽发泄一下。\n\n<!-- more --> <br />\n\n<a name=\"74y5Z\"></a>\n### 新公司，新挑战\n很累，真的很累，上周去了一趟遵义，2天时间，跟着领导跑了3家企业。光会议记录，就记录了整整4页笔记本，然后新的团队非常重视知识的积累和记录，所有的访谈、拜访都必须整理形成文字记录。其实我觉得这是一个非常重要也非常好的习惯。<br />之前在HF的时候，可能还不太重视这点，很多时候都是草草记录在本子上，过段时间就遗忘了或者出现了记忆偏差。我发现，在这种随时记录、尽快形成文字纪要的情况下，就不是了。首先，拜访会议中，你一定会非常认真的去听、去记录。比如我前天参加电话会议的时候，刚好要过飞机的安检，我几乎是在手机从传送带上出来就立马戴上耳机去听，生怕遗漏了。其次，在整理成文字的时候，又会把这些内容重新再过一遍，有时候前后矛盾的地方会得到纠正，有些数据会去进一步核实等等。我觉得这是工作非常重要的一部分。<br />此外，新的团队里，业务非常多，作为VP，除了要会写材料以外，要会承揽，会管理团队。说到这，我就想到要招实习生了，钱虽然不多，但我相信在这样的团队里，成长也会非常的快，绝对是一份含金量很高的实习，我觉得对得起实习生付出的时间。<br />\n\n<a name=\"ZG7JW\"></a>\n### 为什么离职流程这么慢\n针对忍不住要吐槽老东家一句，天要下雨，娘要嫁人，我要离职是你完全挡不住的。而老东家，真的是在这件事情上太bug了。我这么一个底层员工的离职，都需要董事长签字才能放行。Excuse Me！董事长认识我么，他签字不签字有什么实质性的差别么？我也是真的服了，这也体现了什么，一是领导不放权，该放的权得放，该抓的不抓；二是中层真的是不作为，这么一点点责任都不敢承担，不是么？据说投行已经走了一半的人了。该给的待遇给不到，该提的职级迟迟没有动静。说好的年前发年终奖，从二月拖到了三月，然后又一直宣称三月会发，但据我了解是奖金包到了投行，但投行领导一直没法统一发放方案，你们在干啥到底！！好了，按这个节奏嘛，估计拖到6、7月都不一定能发。大家为啥不走？走呗，去一个更加正经的地方。<br />\n<br />困了，先写这点吧。。。话说我还没搞明白怎么把这个push到github上备份呢，唉，压根没时间去分析啊。\n",
    "body_draft": "tags: [吐槽]<br />categories: [下班以后嗨起来]\n\n---\n\n无奈实在是太累了，外加一些其他的事情，就想吐槽发泄一下。\n\n<!-- more --> <br />\n\n<a name=\"74y5Z\"></a>\n### 新公司，新挑战\n很累，真的很累，上周去了一趟遵义，2天时间，跟着领导跑了3家企业。光会议记录，就记录了整整4页笔记本，然后新的团队非常重视知识的积累和记录，所有的访谈、拜访都必须整理形成文字记录。其实我觉得这是一个非常重要也非常好的习惯。<br />之前在HF的时候，可能还不太重视这点，很多时候都是草草记录在本子上，过段时间就遗忘了或者出现了记忆偏差。我发现，在这种随时记录、尽快形成文字纪要的情况下，就不是了。首先，拜访会议中，你一定会非常认真的去听、去记录。比如我前天参加电话会议的时候，刚好要过飞机的安检，我几乎是在手机从传送带上出来就立马戴上耳机去听，生怕遗漏了。其次，在整理成文字的时候，又会把这些内容重新再过一遍，有时候前后矛盾的地方会得到纠正，有些数据会去进一步核实等等。我觉得这是工作非常重要的一部分。<br />此外，新的团队里，业务非常多，作为VP，除了要会写材料以外，要会承揽，会管理团队。说到这，我就想到要招实习生了，钱虽然不多，但我相信在这样的团队里，成长也会非常的快，绝对是一份含金量很高的实习，我觉得对得起实习生付出的时间。<br />\n\n<a name=\"ZG7JW\"></a>\n### 为什么离职流程这么慢\n针对忍不住要吐槽老东家一句，天要下雨，娘要嫁人，我要离职是你完全挡不住的。而老东家，真的是在这件事情上太bug了。我这么一个底层员工的离职，都需要董事长签字才能放行。Excuse Me！董事长认识我么，他签字不签字有什么实质性的差别么？我也是真的服了，这也体现了什么，一是领导不放权，该放的权得放，该抓的不抓；二是中层真的是不作为，这么一点点责任都不敢承担，不是么？据说投行已经走了一半的人了。该给的待遇给不到，该提的职级迟迟没有动静。说好的年前发年终奖，从二月拖到了三月，然后又一直宣称三月会发，但据我了解是奖金包到了投行，但投行领导一直没法统一发放方案，你们在干啥到底！！好了，按这个节奏嘛，估计拖到6、7月都不一定能发。大家为啥不走？走呗，去一个更加正经的地方。<br />\n<br />困了，先写这点吧。。。话说我还没搞明白怎么把这个push到github上备份呢，唉，压根没时间去分析啊。\n",
    "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B10%2C0%2C112%5D%2C%5B10%2C0%2C112%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"97d17c9f31a0d4b2e2e26210055de3f5\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">tags: [吐槽]</p><p data-lake-id=\"261fb119d44221907d085d0492d5ee2d\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">categories: [下班以后嗨起来]</p><div data-card-type=\"block\" data-lake-card=\"hr\"><hr style=\"background-color: rgb(232, 232, 232); border: 1px solid transparent; margin: 18px 0px;\"></div><p data-lake-id=\"4697b6b04fd11ffe975543877e7a0b11\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">无奈实在是太累了，外加一些其他的事情，就想吐槽发泄一下。<br></p><p data-lake-id=\"f1329ecfe8dea7ff0e81e4c1933db4f9\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"26a164b6645b3630d644ba1b71fa7fb9\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">&lt;!-- more --&gt;&nbsp;</p><p data-lake-id=\"978c77a663eba0248e2c295266ff4264\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"dbbb74994756ca680656b1bef47fa73c\" id=\"74y5Z\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">新公司，新挑战</h3><p data-lake-id=\"a7ffb1a0335ec2e4cde15dfceca36696\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">很累，真的很累，上周去了一趟遵义，2天时间，跟着领导跑了3家企业。光会议记录，就记录了整整4页笔记本，然后新的团队非常重视知识的积累和记录，所有的访谈、拜访都必须整理形成文字记录。其实我觉得这是一个非常重要也非常好的习惯。</p><p data-lake-id=\"4c8e8cfb5efe75062993e33464ce0830\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">之前在HF的时候，可能还不太重视这点，很多时候都是草草记录在本子上，过段时间就遗忘了或者出现了记忆偏差。我发现，在这种随时记录、尽快形成文字纪要的情况下，就不是了。首先，拜访会议中，你一定会非常认真的去听、去记录。比如我前天参加电话会议的时候，刚好要过飞机的安检，我几乎是在手机从传送带上出来就立马戴上耳机去听，生怕遗漏了。其次，在整理成文字的时候，又会把这些内容重新再过一遍，有时候前后矛盾的地方会得到纠正，有些数据会去进一步核实等等。我觉得这是工作非常重要的一部分。</p><p data-lake-id=\"a82b23dc6ee7073d74add779e30fb2c7\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">此外，新的团队里，业务非常多，作为VP，除了要会写材料以外，要会承揽，会管理团队。说到这，我就想到要招实习生了，钱虽然不多，但我相信在这样的团队里，成长也会非常的快，绝对是一份含金量很高的实习，我觉得对得起实习生付出的时间。</p><p data-lake-id=\"5656160d162a1e03c74d6cd1b2024efa\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"55be2757fc36ed11e5028aa517ad3d25\" id=\"ZG7JW\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">为什么离职流程这么慢</h3><p data-lake-id=\"04f1576081c20802eb57b8509cbedeb2\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">针对忍不住要吐槽老东家一句，天要下雨，娘要嫁人，我要离职是你完全挡不住的。而老东家，真的是在这件事情上太bug了。我这么一个底层员工的离职，都需要董事长签字才能放行。Excuse Me！董事长认识我么，他签字不签字有什么实质性的差别么？我也是真的服了，这也体现了什么，一是领导不放权，该放的权得放，该抓的不抓；二是中层真的是不作为，这么一点点责任都不敢承担，不是么？据说投行已经走了一半的人了。该给的待遇给不到，该提的职级迟迟没有动静。说好的年前发年终奖，从二月拖到了三月，然后又一直宣称三月会发，但据我了解是奖金包到了投行，但投行领导一直没法统一发放方案，你们在干啥到底！！好了，按这个节奏嘛，估计拖到6、7月都不一定能发。大家为啥不走？走呗，去一个更加正经的地方。</p><p data-lake-id=\"51e8ee85bcbecd56ce03d1751c8469c4\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"171748826a5f4bac73fdb8658eaf25f6\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">困了，先写这点吧。。。话说我还没搞明白怎么把这个push到github上备份呢，唉，压根没时间去分析啊。</p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"97d17c9f31a0d4b2e2e26210055de3f5\">tags: [吐槽]</p><p data-lake-id=\"261fb119d44221907d085d0492d5ee2d\">categories: [下班以后嗨起来]</p><card type=\"block\" name=\"hr\"></card><p data-lake-id=\"4697b6b04fd11ffe975543877e7a0b11\">无奈实在是太累了，外加一些其他的事情，就想吐槽发泄一下。<br /></p><p data-lake-id=\"f1329ecfe8dea7ff0e81e4c1933db4f9\"><br /></p><p data-lake-id=\"26a164b6645b3630d644ba1b71fa7fb9\">&lt;!-- more --&gt; </p><p data-lake-id=\"978c77a663eba0248e2c295266ff4264\"><br /></p><h3 data-lake-id=\"dbbb74994756ca680656b1bef47fa73c\" id=\"74y5Z\">新公司，新挑战</h3><p data-lake-id=\"a7ffb1a0335ec2e4cde15dfceca36696\">很累，真的很累，上周去了一趟遵义，2天时间，跟着领导跑了3家企业。光会议记录，就记录了整整4页笔记本，然后新的团队非常重视知识的积累和记录，所有的访谈、拜访都必须整理形成文字记录。其实我觉得这是一个非常重要也非常好的习惯。</p><p data-lake-id=\"4c8e8cfb5efe75062993e33464ce0830\">之前在HF的时候，可能还不太重视这点，很多时候都是草草记录在本子上，过段时间就遗忘了或者出现了记忆偏差。我发现，在这种随时记录、尽快形成文字纪要的情况下，就不是了。首先，拜访会议中，你一定会非常认真的去听、去记录。比如我前天参加电话会议的时候，刚好要过飞机的安检，我几乎是在手机从传送带上出来就立马戴上耳机去听，生怕遗漏了。其次，在整理成文字的时候，又会把这些内容重新再过一遍，有时候前后矛盾的地方会得到纠正，有些数据会去进一步核实等等。我觉得这是工作非常重要的一部分。</p><p data-lake-id=\"a82b23dc6ee7073d74add779e30fb2c7\">此外，新的团队里，业务非常多，作为VP，除了要会写材料以外，要会承揽，会管理团队。说到这，我就想到要招实习生了，钱虽然不多，但我相信在这样的团队里，成长也会非常的快，绝对是一份含金量很高的实习，我觉得对得起实习生付出的时间。</p><p data-lake-id=\"5656160d162a1e03c74d6cd1b2024efa\"><br /><cursor /></p><h3 data-lake-id=\"55be2757fc36ed11e5028aa517ad3d25\" id=\"ZG7JW\">为什么离职流程这么慢</h3><p data-lake-id=\"04f1576081c20802eb57b8509cbedeb2\">针对忍不住要吐槽老东家一句，天要下雨，娘要嫁人，我要离职是你完全挡不住的。而老东家，真的是在这件事情上太bug了。我这么一个底层员工的离职，都需要董事长签字才能放行。Excuse Me！董事长认识我么，他签字不签字有什么实质性的差别么？我也是真的服了，这也体现了什么，一是领导不放权，该放的权得放，该抓的不抓；二是中层真的是不作为，这么一点点责任都不敢承担，不是么？据说投行已经走了一半的人了。该给的待遇给不到，该提的职级迟迟没有动静。说好的年前发年终奖，从二月拖到了三月，然后又一直宣称三月会发，但据我了解是奖金包到了投行，但投行领导一直没法统一发放方案，你们在干啥到底！！好了，按这个节奏嘛，估计拖到6、7月都不一定能发。大家为啥不走？走呗，去一个更加正经的地方。</p><p data-lake-id=\"51e8ee85bcbecd56ce03d1751c8469c4\"><br /></p><p data-lake-id=\"171748826a5f4bac73fdb8658eaf25f6\">困了，先写这点吧。。。话说我还没搞明白怎么把这个push到github上备份呢，唉，压根没时间去分析啊。</p>",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"97d17c9f31a0d4b2e2e26210055de3f5\">tags: [吐槽]</p><p data-lake-id=\"261fb119d44221907d085d0492d5ee2d\">categories: [下班以后嗨起来]</p><card type=\"block\" name=\"hr\"></card><p data-lake-id=\"4697b6b04fd11ffe975543877e7a0b11\">无奈实在是太累了，外加一些其他的事情，就想吐槽发泄一下。<br /></p><p data-lake-id=\"f1329ecfe8dea7ff0e81e4c1933db4f9\"><br /></p><p data-lake-id=\"26a164b6645b3630d644ba1b71fa7fb9\">&lt;!-- more --&gt; </p><p data-lake-id=\"978c77a663eba0248e2c295266ff4264\"><br /></p><h3 data-lake-id=\"dbbb74994756ca680656b1bef47fa73c\" id=\"74y5Z\">新公司，新挑战</h3><p data-lake-id=\"a7ffb1a0335ec2e4cde15dfceca36696\">很累，真的很累，上周去了一趟遵义，2天时间，跟着领导跑了3家企业。光会议记录，就记录了整整4页笔记本，然后新的团队非常重视知识的积累和记录，所有的访谈、拜访都必须整理形成文字记录。其实我觉得这是一个非常重要也非常好的习惯。</p><p data-lake-id=\"4c8e8cfb5efe75062993e33464ce0830\">之前在HF的时候，可能还不太重视这点，很多时候都是草草记录在本子上，过段时间就遗忘了或者出现了记忆偏差。我发现，在这种随时记录、尽快形成文字纪要的情况下，就不是了。首先，拜访会议中，你一定会非常认真的去听、去记录。比如我前天参加电话会议的时候，刚好要过飞机的安检，我几乎是在手机从传送带上出来就立马戴上耳机去听，生怕遗漏了。其次，在整理成文字的时候，又会把这些内容重新再过一遍，有时候前后矛盾的地方会得到纠正，有些数据会去进一步核实等等。我觉得这是工作非常重要的一部分。</p><p data-lake-id=\"a82b23dc6ee7073d74add779e30fb2c7\">此外，新的团队里，业务非常多，作为VP，除了要会写材料以外，要会承揽，会管理团队。说到这，我就想到要招实习生了，钱虽然不多，但我相信在这样的团队里，成长也会非常的快，绝对是一份含金量很高的实习，我觉得对得起实习生付出的时间。</p><p data-lake-id=\"5656160d162a1e03c74d6cd1b2024efa\"><br /><cursor /></p><h3 data-lake-id=\"55be2757fc36ed11e5028aa517ad3d25\" id=\"ZG7JW\">为什么离职流程这么慢</h3><p data-lake-id=\"04f1576081c20802eb57b8509cbedeb2\">针对忍不住要吐槽老东家一句，天要下雨，娘要嫁人，我要离职是你完全挡不住的。而老东家，真的是在这件事情上太bug了。我这么一个底层员工的离职，都需要董事长签字才能放行。Excuse Me！董事长认识我么，他签字不签字有什么实质性的差别么？我也是真的服了，这也体现了什么，一是领导不放权，该放的权得放，该抓的不抓；二是中层真的是不作为，这么一点点责任都不敢承担，不是么？据说投行已经走了一半的人了。该给的待遇给不到，该提的职级迟迟没有动静。说好的年前发年终奖，从二月拖到了三月，然后又一直宣称三月会发，但据我了解是奖金包到了投行，但投行领导一直没法统一发放方案，你们在干啥到底！！好了，按这个节奏嘛，估计拖到6、7月都不一定能发。大家为啥不走？走呗，去一个更加正经的地方。</p><p data-lake-id=\"51e8ee85bcbecd56ce03d1751c8469c4\"><br /></p><p data-lake-id=\"171748826a5f4bac73fdb8658eaf25f6\">困了，先写这点吧。。。话说我还没搞明白怎么把这个push到github上备份呢，唉，压根没时间去分析啊。</p>",
    "public": 1,
    "status": 1,
    "view_status": 0,
    "read_status": 1,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-03-25T11:39:31.000Z",
    "deleted_at": null,
    "created_at": "2021-03-24T19:13:14.000Z",
    "updated_at": "2021-03-25T11:39:31.000Z",
    "published_at": "2021-03-25T11:39:31.000Z",
    "first_published_at": "2021-03-24T19:25:44.000Z",
    "word_count": 889,
    "cover": "",
    "description": null,
    "custom_description": "新公司，新挑战很累，真的很累",
    "hits": 2,
    "_serializer": "v2.doc_detail"
  }
]