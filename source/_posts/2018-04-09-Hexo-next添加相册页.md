---
title: Hexo/next添加相册页
timestamp: pt=0409131409
date: 2018-04-09 13:14:09
tags:
- 建站
categories: 金融狗在假装码农
---
总算在网上找到了一个适合Next主题的相册页搭建方法。并非原创，在此只是把遇到的问题及解决方案都归总，便于自己今后调整及有需要的人。<!--more-->

## 创建相册页
```bash
hexo new page "photo"  #可以选择其他名字，但此后路径及内容请作对应调整
```
此时会在`source`文件夹中生成`photo`文件夹

## 创建menu标签及汉化
同时，在主题的`_config.yml`中的menu标签下，加入`photo: /photo/ || camera-retro`。

如果需要中文，则进一步在`\languages\zh-Hans.yml`中的menu标签下，加入`photo: 相册`
## 关闭版权设置
修改主题文件`themes/next/layout/_macro/post.swig`
在此文件中搜索 `theme.post_copyright.enable`

定位后，在该行代码中加入`and not post.copyright.disable`
改改完后如下：
```
{%if theme.post_copyright.enable and not is_index and not post.copyright.disable%}
```


## 编辑相册页内容
利用next主题的group_pictures这个js，我们在`\source\photo\index.md`中替换为以下内容（具体使用什么版式请自行调整gp x-x，可以使用相对路劲）
```
---
title: 
type: "picture"
layout: post
copyright:
    disable: true
---
{% gp 8-7 %}  ##gp x-x具体请看group_picutures中的注释
![1](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg "capture")
![1](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg "test")
![1](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg)
![1](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg)
![1](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg)
![1](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg)
![xxxxx](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg)
![xxxxx](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg)
{% endgp %}
```
## 调整gp的fancybox设置
此时`hexo clan && hexo g`及`hexo s`后预览的图片并不能放大，这是因为主题默认的gp是没有启用fancybox的。

在next主题issue中发现此问题的解决方案：[链接](https://github.com/iissnan/hexo-theme-next/issues/1043)
```
在/next/source/js/src/utils.js中修改代码如下

wrapImageWithFancyBox: function() {
    $('.content img')
      .not('[hidden]')
      // .not('.group-picture img, .post-gallery img')
      .each(function() {
```
注意那两个斜杠，就是把那一句注释掉，问题就解决了。

在重新部署后，就会看到相册页已经在菜单栏中，并且已经可以放大浏览了。

## 后记
如还有问题，欢迎留言。并且可以看看我的相册。

参考[ehlxr的相册页](https://ehlxr.me/picture/)处理。