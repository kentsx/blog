---
title: 文本编辑器ST3的坑们
tags: [coding, IDE, ST3]
categories:
  - 金融狗在假装码农
photos: []
author: Mr.K
top: 0
date: 2020-02-14 23:52:16
---
> 关于Sublime Text3使用，新手上路。

近期刚刚开始大批量coding，所以找一个好用的文本编辑器还是挺有必要的。对于大神，VIM这种就ok了，但我不行，太不习惯了，一开始有种反人类的感觉，而且毕竟是在Mac和PC机上，没必要这么折腾自己。我使用了Atom、Sublime Text 3还有Notepad++几款。

<!-- more -->

对于coding，我个人感觉ST3似乎最顺手吧。Atom在git上的集成做的比较好，而且一直开源；ST3我觉得有些插件要比Atom上的成熟，所以更加适合一些，尤其是Anaconda包，Djaneiro。下面主要就讲下ST3在配置过程中的一些坑吧。

## Sublime Text 3 安装付费
首先是Sublime的下载安装，这个看官网。没啥可说的，官网可能会比较慢，看各人网络了。另外，作者的写法是，应该要么，但用作评测可以免费，评测时长目前没限制，所以安装以后会有一个UNREGISTERED的提示，偶尔会跳下对话框提醒你购买，$80，看各人吧。

## Package Control
安装完ST3，第一件事不是开始写写写，作为coding的文本框，为了成为一个好的IDE，那么加点码农的私货还是有必要的。`ctrl+shift+p（Mac下默认command键代替ctrl，在key binding中写的应该是super）`打开一个小悬浮窗，往里面输入`pi`，第一个选项应该是`Package Control`，安装它，以后的包都得靠它。

然后我们来安装各类包，也都是先`ctrl+shift+p`打开一个小悬浮窗，往里面输入`pi`，进入到`Package Control`，然后再输入包的名字进行安装。

推荐安装的包有：
- Anaconda
- Djaneiro（Django代码模板很好用）
- SideBar Enhancement
- SublimeREPL

额外，我建议对git不熟悉或者懒得敲代码的人，可以装下Sublime Merge，视图化操作，不错

## Python编程中的插件归纳

### 首推Anaconda包
这个包作为python中大名鼎鼎的存在，肯定是要装的。用处大家网上搜索下，比如自动填写啊，纠错啊，docstringtip啊之类的挺多。

我这里主要讲我遇到的因为它，需要进行的特殊配置。
- windows下，我不建议build用Anaconda的build，会有非utf8的问题，直接用python似乎更好。
- 需要在包的preference里的user里加些内容，不然会有PEP8问题提示，很碍眼。
```json
{
"anaconda_linting": false,  #这个是为了和Djaneiro等其他的避免冲突
"pep8": false
}
```

### Djaneiro，写Django真好用
这个包主要是为了写Django的，它在HTML和py中都有不错的tab用途，具体见插件repo介绍。

### SideBar Enhancement
这个么，看各人吧，我觉得加了以后侧边栏好用不少。

### SublimeREPL
这个主要是为了交互环境下使用的，比如py脚本中有input这类，光用自带的build就不行了。但这个东西在使用中默认是调用`python`，也就是电脑上的python 2.X版本，所以强制让他调用python3，还需要进行一些配置。

### 出bug场景如下：
我用pip安装了requests包，然后在shell中调用python时，会出现`ImportError: No module named requests`，但我用python3调用同一个脚本，就完全没问题。说明，这个包是在python3的下面，而不是python2。

同样的问题我还遇到了在build中。我的Mac中的sublime会自动调用shell来build，它默认的是Anaconda，然后就调用了Anaconda中的py2，然后就bug了，报错。（windows我还没试，估计问题差不多）。

#### 解决方法1
所以就自己建了一个build。
```json
{
    "cmd": ["/Library/Frameworks/Python.framework/Versions/3.7/bin/python3","-u","$file"],  ##这段第一部分内容，是你电脑上python3的地址，如果是3.X版本，那应该差距就是小数点后的一位。
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python",
    "env": {"PYTHONIOENCODING": "utf8"},## 这句加了是强制用utf8来编码避免汉字报错
}

```
这两个配置好，那基本上运行脚本啥的就不会有大问题了。

#### 解决方法2
上面的问题还有一个解决方法，相对讨巧一些。建一个虚拟环境，然后在`Preference->Package Settings->SublimeREPL->Settings User`中添加如下语句：
```json
{
"default_extend_env": {"PATH":"D:\\youcaihua\\venv\\Scripts"},
#具体地址选到你的activate在的文件夹
}
```

## 题外话
今天由于想着说稍微研究下数据分析的东西，去搞了个Tushare，尽管我有wind，但我还是觉得看看开源的不错。上面的方法2也是我在弄tushare虚拟环境时候召到的。其实你可以写很多个路径进去，不用的全部注释掉，用哪个，开哪个。

另外，可能由于我是移动的渣宽带，这个上互联网的速度实在是太慢了。所以有必要对pip进行一些源的设置。找了下网上的说法，找到了如下几个源：
```
（1）阿里云 http://mirrors.aliyun.com/pypi/simple/
（2）豆瓣http://pypi.douban.com/simple/
（3）清华大学 https://pypi.tuna.tsinghua.edu.cn/simple/
（4）中国科学技术大学 http://pypi.mirrors.ustc.edu.cn/simple/
（5）华中科技大学http://pypi.hustunique.com/

   ## 注意：新版ubuntu要求使用https源。
```

### 设置方法1
每次在安装时候后面加上 `-i <源地址>`，例如`pip install tushare -i https://pypi.tuna.tsinghua.edu.cn/simple`

### 设置方法2
一劳永逸点，把它写在配置文件中

- Linux/OSX : 在当前用户目录下创建.pip文件夹

`mkdir ~/.pip`
 
然后在该目录下创建pip.conf文件填写：
```
[global]
trusted-host=mirrors.aliyun.com
index-url=http://mirrors.aliyun.com/pypi/simple/
```
- Windows：创建%HOMEPATH%\pip\pip.ini文件来配置。

`例如：C:\Users\fxl\pip\pip.ini`

pip.ini配置的主要一些配置：
```
[global]
trusted-host=mirrors.aliyun.com
index-url=http://mirrors.aliyun.com/pypi/simple/
```

