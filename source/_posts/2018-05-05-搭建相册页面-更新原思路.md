---
title: 搭建相册页面-更新原思路
tags: [建站,优化]
categories:
  - 金融狗在假装码农
timestamp: pt=0505134114
date: 2018-05-05 13:41:14
author: MR.K
---
> 1 Feb, 2020 Update

这个已经是过去式了，不过如果用next主题的话，还是可以参考。目前用的Ocean主题需要这么麻烦了

# 前言

之前写了一篇文章，模仿大神的方法，搭建了一个照片墙页面。[博文链接](/2018/2018-04-09-Hexo-next添加相册页/)
<!--more-->
但是感觉来感觉去，总有些缺陷，不是我想要的。这个方法产生的照片墙是不能归类的。而我想要的，则是类似于Facebook相册那样的一个东西，有一个缩略图或者相册封面，点进去之后，是这个相册中所有的照片。大神的方法简单易行，但是却无法满足我的需求。在网上找了很久，有许多关于Yallia主题改为非instagram照片的东西，但是依然没有我想要的。

# 干货

## 最终效果
废话不多说了，想要看效果的，请直接看我的照片页面：[Demo](/photo/)

## 整体思路

整体思路是，Hexo Next主题是直接兼容HTML语言的，那么我就直接用HTML来写相册的主页面，然后再用next的group picture来作为相册封面点入以后的内容，这样能兼具fancybox的效果。

## 创建Photo页面及汉化Menu标签

此步骤请参见之前博文内容，略。

## 加入自定义的CSS
> Q: 为什么要加自定义CSS？

>A: 我的CSS分为三部分：
1、因为直接写div标签的时候，默认是占整行的，但是这样做出来的相册封面是不是很丑啊？本来就是想做个缩略图放那边作为相册封面，结果搞那么大。。
2、因为我希望实现鼠标移到图片上出现这个相册的名字，也就是需要用到遮罩，那么没有CSS不行。
3、之后新建的相簿页面，因为不是hexo产生的，貌似无法出现页面标题（title部分的只是标签页名称，不会在body中出现），但是直接用markdown的`#`会导致右侧目录自动推出（我的设置是这样），同时不能居中，所以我进一步加入了第三个CSS。 

找到Next主题自定义样式`\themes\next\source\css\_custom`中的`custom.styl`加入以下内容：

### 一行并列的div标签
因为担心会和原有的css重名，所以这里用的名称都比较长

```html
.divbox{ 
	width: 30%; //这个大小建议不动
    height: 150px; //如果希望图片高一些，可以增大
	position:relative;
	background:;
	cursor:pointer;
	display: inline-block; //产生同行多个div
	overflow: hidden; // 避免照片过长溢出div
	margin-top: 2% ;
    margin-left: 2.5%;
 }
```

### 相册首页遮罩

以下部分CSS能实现鼠标移到图片上出现相册名称的功能。如果不需要，可以不加此CSS。

```html
.divbox .bmbox{ 
  width:100%; 
  height:30px; 
  background:black; 
  position:absolute; 
  bottom:0px; 
  left:0px; 
  display:none;
  font:12px/30px "arial"; 
  opacity: 0.9; 
  color: #fff; 
  background: rgba(0,0,0,0.7)
  text-align:center;
 }
.divbox:hover .bmbox{
  width:100%; 
  height:30px; 
  background:black; 
  position:absolute; 
  bottom:0px; 
  left:0px; 
  display:block;
  font:12px/30px "arial"; 
  opacity: 0.9; 
  color: #fff; 
  background: rgba(0,0,0,0.7)
  text-align:center;
 }
```

### 进入某个相册后的名称和标题样式
这部分的CSS是自选的，如果不需要点入某个相册后，出现相册的名称以及一些小标题，比如“Day 1”“Day 2”之类的，亦或者本身没有开启next的目录自动弹出的，可以不用。
```html
.phototitle{
	width: 100%;
	height: 60px;
	font:bold 30px/60px sans-serif; 
	text-align:center;
 }

.phototitle_h1{
	width: 100%;
	height: 60px;
	font:20px/60px sans-serif; 
	text-align:center;
 }
```

### 【偷懒】下载并替换原文件
如果你不想看那么复杂，并且原来的自定义样式就没有用起来，你可以直接复制并替换原来文件。
[链接](https://file.kenny4ever.com/html/custom.styl)

## 建立photo首页的html
在`\source\photo`的`index.md`中加入如下内容。以下内容中间请不要因为长而换行，因为一行就是一行的三张图片，换行后会导致图片变为下一行。如果相册首页需要展现比如9个相簿，请这部分代码复制3次，每次中间换行。

关于img标签中，`nofancybox`请看此文：[链接](/2018/2018-05-03-网站优化-设置部分图片不使用fancybox/)

```html
<!--第1排，每排3图-->
<div class="divbox"><div class="bmbox">相册名称1</div><a href="test.html"><img class="nofancybox" src='封面图链接1'/></a></div><div class="divbox"><div class="bmbox">相册名称2</div><a href="test.html"><img class="nofancybox" src='封面图链接2'/></a></div><div class="divbox"><div class="bmbox">相册名称3</div><a href="test.html"><img class="nofancybox" src='https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg'/></a></div>
```

把其中的相册名称、链接等替换成你自己的即可。`href`部分在下一步操作中解释。

## 相簿内页
在`\source\photo`下新建`test.md`的文件作为测试。因为hexo在generate时会将md文件都转成html的。
打开文件后，在文件中复制以下内容：

```
---
title: test pictures page
type: "picture"
layout: post
copyright:
    disable: true
---

<div class="phototitle">testing</div>

<div class="phototitle_h1">Day 1</div>

{% gp 4-3 %}
![xxxx(2017-05-14)](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg "test")
![xxxx(2017-05-14)](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg "test")
![xxxx(2017-05-14)](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg "test")
![xxxx(2017-05-14)](https://cdn.stocksnap.io/img-thumbs/960w/BUI8ASSJRG.jpg "test")
{% endgp %}

```
> 1、title是页标签中显示的。
2、两个div的样式我们已经在前一步设置了，其中testing是大标题，Day 1是章节标题，且不会呼出页面的目录侧栏
3、gp部分根据个人照片数量吧，放置的形状参见之前的文章。

# 生成新的相簿及相册

```
hexo clean && hexo g
hexo d
```

新的相册上线。Done！

