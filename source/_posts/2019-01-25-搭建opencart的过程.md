---
title: 搭建opencart的过程
tags: [建站,商城,php]
categories:
  - 金融狗在假装码农
abstract: 【】
message: 感谢浏览，本文内容已加密，请输入密码：
timestamp: pt=0125091358
date: 2019-01-25 09:13:58
photos:
author: Mr.K
password:
top: 0 #若需指定，请用大于1的数，越大越靠前
---
> 近期特别执着于建站，甚至连python都停下来了几天了。更不要说CFA了。之后要抓紧了。
<!--more-->
## 初衷
一开始搞这个，只是因为前一阵子学了点php的皮毛，总想着尝试下；另外很有一种想通过电商发家致富的想法，所以先试试水。

## 安装过程
### 说明
此处的过程，是最后一次顺利安装安装的前后过程。并不是真正的时序顺序。安装过程中遇到的问题，我也会列出的。

### 0、一台新机
因为各种原因，我只好把我原来的服务器给reinstall了。也就是拿了一台新机器。大致配置如下：
```
VPS: Vultr
RAM: 512MB
Storage: 20GB SSD
Bandwidth: 500GB / Month
Location: USA
Ping: 延时基本在200ms左右
OS: CentOS 7 x64
```
如果你有兴趣使用vultr的服务器，我就打个小广告，希望你能用我的链接注册,谢谢。[https://www.vultr.com/?ref=7787278-4F](https://www.vultr.com/?ref=7787278-4F)。**具体详见[推荐链接说明](https://blog.kmore.ml/2019/pt=01251105/)**

> 重新洗白vps的主要原因，是因为刷了ss以及mtproxy，但是因为不止安装过一次，所以系统里的版本就比较乱。此外，我安装到后期，发现无论如何都没法实现访问，所以索性一狠心，重刷了。

### 1、安装SS（无需求的朋友可以跳过此步骤）
这步不同人用的脚本不同，我喜欢刷SSR，虽然没有现在的什么V2Ray之类的那么安全，但是速度和内存占用总体较小。个人使用也无所谓了。

我用的脚本及安装步骤，以后会贴链接的。

> 这里有一个插曲，我先装了MTProxy用于tg，但是无奈后面又重新装了一遍，所以装完SS就可以开始搭网站了。

### 2、安装宝塔（LNMP或LAMP）
这步我偷懒了，我不是CS出身的，所以对linux的系统还是很不熟练的，特别多的语法等掌握不好，所以我就在网上找了一个Linux面板，[宝塔](https://www.bt.cn)。目前使用下来感觉还可以吧，没有过多的定制，免费版已经把大部分最常用的功能都有了。

如果你是Linux以及前端的达人，那就忽略我这样的行为，毕竟纯Linux环境下的LNMP或者LAMP更具有操作性嘛。
> **安装教程：**[宝塔6.8版安装](https://www.bt.cn/bbs/thread-19376-1-1.html)

**配置要求：**
```
内存：512M以上，推荐768M以上（纯面板约占系统60M内存）
硬盘：100M以上可用硬盘空间（纯面板约占20M磁盘空间）
系统：CentOS 7.1+ (Ubuntu16.04+.、Debian9.0+)，确保是干净的操作系统，没有安装过其它环境带的Apache/Nginx/php/MySQL（已有环境不可安装）

```

像我的话，因为是CentOS 7的系统，所以直接用的以下命令进行安装：
```
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh
```
安装宝塔系统完成后，我选择安装了LNMP包。（你也可以用LAMP，我是考虑到以后可能会把别的移过来，所以选择了这套系统）由于opencart的要求，所以版本选择如下：
```
php 7.0
Nginx 1.8.1
MySQL 5.5.57
```
![console](https://file.kmore.ml/pic/2019-01-25-搭建opencart的过程/pic01.png)
安装完成后，会给你一开始的登录端口及8位验证位以及登录名和密码。这些在你首次登陆后都可以在`面板设置`更改。

### 3、建站opencart
- 首先在左侧的`网站`处，`添加站点`。并在`默认站点`里选择新创建的网站。
![newsite](https://file.kmore.ml/pic/2019-01-25-搭建opencart的过程/pic02.png)
- 配置DNS。在你的DNS服务器那边配置解析。我用的是Cloudflare，就加了一条CNAME。`store指向服务器的ip`
- 加装SSL。现在都追求小绿锁了，https肯定是不能少了，所以SSL还是要配置的。待DNS解析完了，在站点名后面的设置里，有一项SSL，我们直接用`Let's Encrypt`免费证书，且宝塔会自动在3个月后更新，较为方便省事。
- 修改数据库类型。到宝塔左侧栏`数据库`中，选择管理，跳转到phpadmin页面后，修改之前创建的服务器编码规则为`utf8_general_ci`。
- 在宝塔左侧栏`软件管理`中，找到安装版本的php版本后，点击设置。`安装扩展`，安装`fileinfo`扩展件。（这个文件是opencart需要的）。
> 到此，所有我们需要的前序步骤应该都完成了。如果一切都安装完成，那么你在地址栏测试一下，输入域名或者ip，应该就会出现一个宝塔的默认页面，“恭喜！xxxxx”
你也可以注意下，是不是https了。

- 回到网站页面，点击根目录。跳转到网页的根目录，删除所有里面的文件。上传upload的压缩包，再解压，把upload里面所有的文件，剪切至根目录。
- 在浏览器地址栏输入`ip/index.php`或`域名/index.php`，会进入opencart安装界面。第二步，安装程序会自动检测所有的必备插件等是否妥善安装，看见所有都是绿色的勾的时候，你就可以安心向下了。之后就沿着步骤完成每一步安装即可。

### 4、关于SSL的特殊配置。
如果，你开启了SSL，那么请你调整。未开的，可以忽略。
因为opencart的配置文件，默认是没有ssl的，这回导致你的所有的css\js等文件都读取不正常。
- 回到网站根目录，点开`config.php`编辑，将最开头6行里的两个ip地址，均改为`https://域名`或`https://ip`。如图。保存后退出。
![ssl1](https://file.kmore.ml/pic/2019-01-25-搭建opencart的过程/pic03.png)
- 回到根目录，进入`/admin`文件夹，如法炮制。如图。catelog那项，不要加`/admin`。
![ssl2](https://file.kmore.ml/pic/2019-01-25-搭建opencart的过程/pic04.png)

## 完成
这样，应该就已经将最基本的opencart装入你的服务器了。试试域名看吧。后期的调整等，以后再写了。

## 完成后续
我在完成宝塔、opencart安装后，发现原先装的MTPROTO Proxy又挂了，所以又装了一遍。原因我也不知道，是什么地方冲突了吧。但再安装一次之后，对opencart目前没有发现影响。